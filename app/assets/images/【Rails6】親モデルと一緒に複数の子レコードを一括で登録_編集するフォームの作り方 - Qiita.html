<!DOCTYPE html>
<!-- saved from url=(0050)https://qiita.com/hatsu/items/5465f29060945a615ecd -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>【Rails6】親モデルと一緒に複数の子レコードを一括で登録/編集するフォームの作り方 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport"><meta content="#55c500" name="theme-color"><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification"><meta content="telephone=no" name="format-detection"><link rel="canonical" href="https://qiita.com/hatsu/items/5465f29060945a615ecd"><link href="https://qiita.com/manifest.json" rel="manifest"><link href="https://qiita.com/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml"><link as="script" href="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/gpt.js" rel="preload"><link href="https://securepubads.g.doubleclick.net/" rel="preconnect"><script async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/im-uid.js"></script><script type="text/javascript" charset="UTF-8" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/lift.json"></script><script type="text/javascript" charset="UTF-8" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/im-uid-hook.js"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/analytics.js"></script><script type="text/javascript" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/combo" async=""></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/analytics.js"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/js"></script><script async="">window.a1tracker&&a1tracker.ready(function(tracker){var doh="ff9a3577423c8ed5";if(!doh)return;var params={"event":"","url":"","referrer":"","metakeywords":"","callback":""};if(params.url)tracker.setParams(doh,"url",params.url);if(params.referrer)tracker.setParams(doh,"referrer",params.referrer);if(params.metakeywords){var mk=tracker.getParams(doh,"metakeywords");Array.prototype.push.apply(mk,params.metakeywords.split(","));tracker.setParams(doh,"metakeywords",mk)}tracker.setParams(doh,"tagsource","itm_a1common");var callback=params.callback&&typeof window[params.callback]==="function"?function(err,data){if(!err&&data.segments.length>0)window[params.callback](data.segments);return}:function(){};if(params.event)tracker.send(doh,params.event.split(","),callback);else tracker.send(doh,callback)});</script><script async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/tracking.min.js"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/js(1)"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/js(2)"></script><script async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/ff9a3577423c8ed5_4330.js"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/td.min.js"></script><script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/1792588824374455" async=""></script><script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/305156090176370" async=""></script><script async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/fbevents.js"></script><script async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/gpt.js"></script><meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="RSAX9cmLhuIo6Q7gN0toQ2ScDnY9MGfVWVHpAOpdo9mbYvMz2onyBIfayGNx7AKGJdq9u5r+R8M174iMj6pFrg=="><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico"><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png"><link rel="stylesheet" media="all" href="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/article-0e993d4be1174c8a0430fcb415ffa269.min.css"><link rel="stylesheet" media="all" href="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/css2"><script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/v3-article-bundle-45775e8f4859c964560f.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site"><meta content="@hatsu_38" name="twitter:creator"><meta property="og:type" content="article"><meta property="og:title" content="【Rails6】親モデルと一緒に複数の子レコードを一括で登録/編集するフォームの作り方 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-9f5428127621718a910c8b63951390ad.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTkxNiZ0eHQ9JUUzJTgwJTkwUmFpbHM2JUUzJTgwJTkxJUU4JUE2JUFBJUUzJTgzJUEyJUUzJTgzJTg3JUUzJTgzJUFCJUUzJTgxJUE4JUU0JUI4JTgwJUU3JUI3JTkyJUUzJTgxJUFCJUU4JUE0JTg3JUU2JTk1JUIwJUUzJTgxJUFFJUU1JUFEJTkwJUUzJTgzJUFDJUUzJTgyJUIzJUUzJTgzJUJDJUUzJTgzJTg5JUUzJTgyJTkyJUU0JUI4JTgwJUU2JThCJUFDJUUzJTgxJUE3JUU3JTk5JUJCJUU5JThDJUIyJTJGJUU3JUI3JUE4JUU5JTlCJTg2JUUzJTgxJTk5JUUzJTgyJThCJUUzJTgzJTk1JUUzJTgyJUE5JUUzJTgzJUJDJUUzJTgzJUEwJUUzJTgxJUFFJUU0JUJEJTlDJUUzJTgyJThBJUU2JTk2JUI5JnR4dC1jb2xvcj0lMjMyMTIxMjEmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTYmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWxlZnQlMkN0b3Amcz1hNGQ5OTA1YThhMTBlYTU3OWY4M2IwMWQ0NTk5YjJlMA&amp;mark-x=142&amp;mark-y=112&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTYxNiZ0eHQ9JTQwaGF0c3UmdHh0LWNvbG9yPSUyMzIxMjEyMSZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT0zNiZ0eHQtYWxpZ249bGVmdCUyQ3RvcCZzPWI4Zjg4MWEzODM3NDE0MDc0NzVmMjAxZGNkMWY1NGU4&amp;blend-x=142&amp;blend-y=491&amp;blend-mode=normal&amp;s=9484b58c6fbc00eb139e30aade4227bd"><meta property="og:description" content="Ruby on Railsで複数のモデル、複数のレコードを1つのフォームで一括登録/編集したい、Javascriptはあまり書かずに...という機会があったので、その実装について今回まとめてみました。


完成イメージ


レシピのレ..."><meta content="https://qiita.com/hatsu/items/5465f29060945a615ecd" property="og:url"><meta content="Qiita" property="og:site_name"><meta content="564524038" property="fb:admins"><meta content="Rails,cocoon" name="keywords"><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '305156090176370');
fbq('trackSingle', '305156090176370', 'PageView');</script><meta http-equiv="origin-trial" content="Az6AfRvI8mo7yiW5fLfj04W21t0ig6aMsGYpIqMTaX60H+b0DkO1uDr+7BrzMcimWzv/X7SXR8jI+uvbV0IJlwYAAACFeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjgwNjUyNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><meta http-equiv="origin-trial" content="A+USTya+tNvDPaxUgJooz+LaVk5hPoAxpLvSxjogX4Mk8awCTQ9iop6zJ9d5ldgU7WmHqBlnQB41LHHRFxoaBwoAAACLeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjgwNjUyNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><meta http-equiv="origin-trial" content="A7FovoGr67TUBYbnY+Z0IKoJbbmRmB8fCyirUGHavNDtD91CiGyHHSA2hDG9r9T3NjUKFi6egL3RbgTwhhcVDwUAAACLeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjgwNjUyNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/pubads_impl_2022120501.js" async=""></script><noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=305156090176370&ev=PageView&noscript=1"/></noscript><style data-emotion-css="92283 1lqf3ug 10bcla9 1n29xqy 1vy2f60 1o89fic yrmhnf 2pgeei 1duml6f 11dzwqt 12bqizz nje458 6vxoy2 krcte5 yk0pbv uqvml5 19m4w61 1pj4960 ag7bw5 1lt09u6 79elbk 1ydfkyi 1j8uoc8 rl6otz 1d369es 1hbd3g7 irwgf6 1uawg69 1btebg9 8qb8m4 17zza1i 70qvj9 6su6fj n4w850 1r4slzx 772dpg 17ay39c 1ay9vb9 8py6gv 157eoh6 1je2il4 f6bdq2 1ij24kf z1o26v r2q46l 1opxprl 186gyuo gimjo7 5jpx49 10h2231 15rblvx 1o09fmu" }="">.css-92283{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.css-1lqf3ug{background-color:#e3f7df;padding:8px 16px;position:relative;text-align:center;width:100%;}@media (max-width:769px){.css-1lqf3ug{padding-right:40px;text-align:left;}}.css-10bcla9{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;}.css-1n29xqy{background-color:transparent;color:rgba(0,0,0,0.6);padding:4px;position:absolute;right:32px;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}@media (max-width:769px){.css-1n29xqy{padding:12px;right:0;top:0;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}}.css-1vy2f60{display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-size:16px;font-variation-settings:'FILL' 0,'wght' 500,'GRAD' 0,'opsz' 24;height:16px;overflow:hidden;width:16px;}.css-1o89fic{background:#f5f6f6;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:16px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:24px 24px 0;}@media (max-width:769px){.css-1o89fic{padding:24px 16px 0;display:block;}}@media (max-width:479px){.css-1o89fic{padding:24px 0 0;}}.css-yrmhnf{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:16px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:-webkit-sticky;position:sticky;top:16px;z-index:5;}@media (max-width:769px){.css-yrmhnf{display:none;}}.css-2pgeei{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.css-1duml6f{height:40px;width:40px;position:relative;}.css-1duml6f svg{cursor:auto;pointer-events:none;}.css-11dzwqt{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#ffffff;border-width:2px;border-style:solid;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:40px;left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border-color:#5f6161;}.css-12bqizz{display:inline-block;fill:#5f6161;height:24px;vertical-align:middle;width:24px;}.css-nje458{background-color:transparent;border:none;cursor:pointer;height:40px;padding:0;position:absolute;width:40px;}.css-6vxoy2{color:rgba(0,0,0,0.6);cursor:pointer;font-size:14px;font-weight:bold;}.css-krcte5{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.css-yk0pbv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#ffffff;border:2px solid #5f6161;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:40px;}.css-uqvml5{display:inline-block;fill:#5f6161;height:24px;width:24px;}.css-19m4w61{color:#5f6161;font-size:14px;font-weight:bold;}.css-1pj4960{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:rgba(0,0,0,0.6);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0;width:32px;}.css-ag7bw5{border:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:rgba(0,0,0,0.6);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0;width:32px;}.css-1lt09u6{height:20px;fill:currentColor;width:20px;}.css-79elbk{position:relative;}.css-1ydfkyi{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;border-radius:50%;color:rgba(0,0,0,0.6);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0;width:32px;}.css-1j8uoc8{display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-size:24px;font-variation-settings:'FILL' 0,'wght' 500,'GRAD' 0,'opsz' 24;height:24px;overflow:hidden;width:24px;}.css-rl6otz{border-radius:8px;}.css-1d369es{border-radius:0;box-sizing:border-box;cursor:pointer;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-size:14px;font-weight:600;line-height:1.8;margin-bottom:0;min-height:34px;min-width:64px;padding:8px 12px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap;-webkit-transition:.1s ease-out;transition:.1s ease-out;-webkit-transition-property:background-color,border-color;transition-property:background-color,border-color;background-color:#55c500;border:2px solid #55c500;color:#ffffff;}.css-1d369es:disabled{box-shadow:none;cursor:not-allowed;opacity:0.38;}.css-1d369es:active{background-color:#46a900;border-color:#46a900;}@media (hover:hover) and (pointer:fine){.css-1d369es:hover{background-color:#46a900;border-color:#46a900;}}.css-1hbd3g7{height:250px;}.css-irwgf6{background-color:#ffffff;border-radius:8px;padding:32px;margin-bottom:24px;}@media (max-width:479px){.css-irwgf6{border-radius:0;margin:0 0 40px;padding:32px 16px;}}.css-1uawg69{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fdf9e2;border-radius:8px;color:rgba(0,0,0,0.87);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:14px;font-weight:600;gap:8px;line-height:1.5;margin-bottom:16px;padding:16px;}.css-1btebg9{display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-size:24px;font-variation-settings:'FILL' 1,'wght' 500,'GRAD' 0,'opsz' 24;height:24px;overflow:hidden;width:24px;color:#f7a535;}.css-8qb8m4{margin-bottom:48px;}.css-17zza1i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:14px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;line-height:1.8;width:100%;}@media (max-width:769px){.css-17zza1i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-6su6fj{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}.css-n4w850{border-radius:50%;display:inline-block;height:24px;line-height:1;object-fit:contain;overflow:hidden;vertical-align:middle;width:24px;}.css-1r4slzx{line-height:1.5;margin-left:4px;}.css-772dpg{color:rgba(0,0,0,0.87);font-weight:600;word-break:break-all;}.css-17ay39c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:rgba(0,0,0,0.6);}.css-1ay9vb9{margin-right:16px;}.css-8py6gv{color:rgba(0,0,0,0.87);font-size:32px;font-weight:600;line-height:1.4;margin-top:8px;word-break:break-all;}.css-157eoh6{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1je2il4{display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-size:20px;font-variation-settings:'FILL' 1,'wght' 500,'GRAD' 0,'opsz' 24;height:20px;overflow:hidden;width:20px;color:rgba(0,0,0,0.6);margin-right:8px;}.css-f6bdq2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;z-index:1;}.css-1ij24kf{color:inherit;font-size:14px;}.css-z1o26v{margin:0 4px 0 2px;}.css-r2q46l{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;gap:16px;}.css-1opxprl{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:44px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:44px;}.css-186gyuo{border:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:44px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:44px;}.css-gimjo7{background-color:#ffffff;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom,0px);position:fixed;width:100%;z-index:2000;}@media (max-width:769px){.css-gimjo7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-10h2231{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.css-15rblvx{color:rgba(0,0,0,0.6);cursor:pointer;font-size:14px;font-weight:bold;margin-left:8px;}.css-1o09fmu{color:#5f6161;font-size:14px;font-weight:bold;margin-left:8px;}</style><style data-emotion-css="16hp9px ui6dca" }="">.css-16hp9px{display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-size:24px;font-variation-settings:'FILL' 1,'wght' 500,'GRAD' 0,'opsz' 24;height:24px;overflow:hidden;width:24px;}.css-ui6dca{border-radius:8px;box-sizing:border-box;cursor:pointer;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-size:14px;font-weight:600;line-height:1.8;margin-bottom:0;min-height:34px;min-width:64px;padding:4px 16px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap;-webkit-transition:.1s ease-out;transition:.1s ease-out;-webkit-transition-property:background-color,border-color;transition-property:background-color,border-color;background-color:#55c500;border:2px solid #55c500;color:#ffffff;}.css-ui6dca:disabled{box-shadow:none;cursor:not-allowed;opacity:0.32;}.css-ui6dca:active{background-color:#46a900;border-color:#46a900;}@media (hover:hover) and (pointer:fine){.css-ui6dca:hover{background-color:#46a900;border-color:#46a900;}}</style><script>window.frtn=window.frtn||function(){ (frtn.q=frtn.q||[]).push(arguments) };
frtn("init",{
service_id:"cova_248",
site_id:"site_134",
tag_id:"tag_283"
});
frtn("send","pageview");</script><script defer="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/insight.js" type="text/javascript"></script><script>!function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}},s=["addRecord","blockEvents","fetchServerCookie","fetchGlobalID","fetchUserSegments","resetUUID","ready","setSignedMode","setAnonymousMode","set","trackEvent","trackPageview","trackClicks","unblockEvents"],n=0;n<s.length;n++){var c=s[n];e[t].prototype[c]=r(c)}var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.treasuredata.com/sdk/2.5/td.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)}}("Treasure",this);

// Configure an instance for your database
var td = new Treasure({
  host: 'in.treasuredata.com',
  writeKey: '10614/e3887673c1849754466b09ad01b4fbbc22b88f30',
  database: 'qiita_public',
  startInSignedMode: true
});

var success = function() {
  syncGoogleDDPv2();
};

var failure = function() {
  syncGoogleDDPv2();
}

var syncGoogleDDPv2 = function() {
  var ddp_destination = 'cm.g.doubleclick.net/pixel'
      + '?google_nid=treasuredata_dmp'
      + '&google_hm=' + btoa(self.td.client.track.uuid).replace(/\//g, '_').replace(/\+/g, '-').replace(/=/g, '');

  var n = document.createElement("img");
  n.src = ("https:" == document.location.protocol ? "https://" : "http://") + ddp_destination;
  n.width = 1;
  n.height = 1;
  n.style.display = "none";
  document.body.appendChild(n);
}

// Enable cross-domain tracking
td.set('$global', 'td_global_id', 'td_global_id');
// Track pageview information to 'pageviews' table
td.set('pageviews_all', {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"hatsu","type":"items","id":"5465f29060945a615ecd"},"request_id":"0bf8f8ca-96bf-4301-a74e-503774278c05","user_id":2882158})
td.trackPageview('pageviews_all', success, failure);</script><link as="style" crossorigin="anonymous" href="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" onload="this.onload=null;this.rel=&#39;stylesheet&#39;" referrerpolicy="no-referrer" rel="stylesheet"><noscript><link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" referrerpolicy="no-referrer" rel="stylesheet" /></noscript><script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/js(3)"></script><style data-emotion="css"></style><script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/bookmark_button.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    skipStartupTypeset: true,
    showProcessingMessages: false,
    tex2jax: {
      inlineMath: [['$', '$']],
      displayMath: [['$$', '$$']],
      processEscapes: true,
      processEnvironments: false,
      processRefs: false,
      skipTags: ['script','noscript','style','textarea','pre','code','a','h1','h2','h3','h4','h5','h6']
    },
    "HTML-CSS": { 
      linebreaks: { automatic: true }
   }
   })</script><script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/bookmark_button.js"></script><script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/lift_widget.js"></script><meta http-equiv="origin-trial" content="A751Xsk4ZW3DVQ8WZng2Dk5s3YzAyqncTzgv+VaE6wavgTY0QHkDvUTET1o7HanhuJO8lgv1Vvc88Ij78W1FIAAAAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjgwNjUyNzk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A751Xsk4ZW3DVQ8WZng2Dk5s3YzAyqncTzgv+VaE6wavgTY0QHkDvUTET1o7HanhuJO8lgv1Vvc88Ij78W1FIAAAAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjgwNjUyNzk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f.txt"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(1).txt"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(2).txt"></script><style data-jss="" data-meta="MuiTooltip">
.MuiTooltip-popper {
  z-index: 1500;
  pointer-events: none;
}
.MuiTooltip-popperInteractive {
  pointer-events: auto;
}
.MuiTooltip-popperArrow[x-placement*="bottom"] .MuiTooltip-arrow {
  top: 0;
  left: 0;
  margin-top: -0.71em;
  margin-left: 4px;
  margin-right: 4px;
}
.MuiTooltip-popperArrow[x-placement*="top"] .MuiTooltip-arrow {
  left: 0;
  bottom: 0;
  margin-left: 4px;
  margin-right: 4px;
  margin-bottom: -0.71em;
}
.MuiTooltip-popperArrow[x-placement*="right"] .MuiTooltip-arrow {
  left: 0;
  width: 0.71em;
  height: 1em;
  margin-top: 4px;
  margin-left: -0.71em;
  margin-bottom: 4px;
}
.MuiTooltip-popperArrow[x-placement*="left"] .MuiTooltip-arrow {
  right: 0;
  width: 0.71em;
  height: 1em;
  margin-top: 4px;
  margin-right: -0.71em;
  margin-bottom: 4px;
}
.MuiTooltip-popperArrow[x-placement*="left"] .MuiTooltip-arrow::before {
  transform-origin: 0 0;
}
.MuiTooltip-popperArrow[x-placement*="right"] .MuiTooltip-arrow::before {
  transform-origin: 100% 100%;
}
.MuiTooltip-popperArrow[x-placement*="top"] .MuiTooltip-arrow::before {
  transform-origin: 100% 0;
}
.MuiTooltip-popperArrow[x-placement*="bottom"] .MuiTooltip-arrow::before {
  transform-origin: 0 100%;
}
.MuiTooltip-tooltip {
  color: #fff;
  padding: 4px 8px;
  font-size: 0.625rem;
  max-width: 300px;
  word-wrap: break-word;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.4em;
  border-radius: 4px;
  background-color: rgba(97, 97, 97, 0.9);
}
.MuiTooltip-tooltipArrow {
  margin: 0;
  position: relative;
}
.MuiTooltip-arrow {
  color: rgba(97, 97, 97, 0.9);
  width: 1em;
  height: 0.71em;
  overflow: hidden;
  position: absolute;
  box-sizing: border-box;
}
.MuiTooltip-arrow::before {
  width: 100%;
  height: 100%;
  margin: auto;
  content: "";
  display: block;
  transform: rotate(45deg);
  background-color: currentColor;
}
.MuiTooltip-touch {
  padding: 8px 16px;
  font-size: 0.875rem;
  font-weight: 400;
  line-height: 1.14286em;
}
.MuiTooltip-tooltipPlacementLeft {
  margin: 0 24px ;
  transform-origin: right center;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementLeft {
    margin: 0 14px;
  }
}
.MuiTooltip-tooltipPlacementRight {
  margin: 0 24px;
  transform-origin: left center;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementRight {
    margin: 0 14px;
  }
}
.MuiTooltip-tooltipPlacementTop {
  margin: 24px 0;
  transform-origin: center bottom;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementTop {
    margin: 14px 0;
  }
}
.MuiTooltip-tooltipPlacementBottom {
  margin: 24px 0;
  transform-origin: center top;
}
@media (min-width:600px) {
  .MuiTooltip-tooltipPlacementBottom {
    margin: 14px 0;
  }
}
</style><link rel="preload" href="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(3).txt" as="script"><script type="text/javascript" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(3).txt"></script><link rel="preload" href="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(4).txt" as="script"><script type="text/javascript" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(4).txt"></script><style type="text/css">#logly-lift-4279494 #logly-lift-widget {
  
  width: 100%;
  
  
  
  clear: both;
}

#logly-lift-4279494 #logly-lift-widget-label {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  
  border-bottom-color: #5C97FF;
  
}

#logly-lift-4279494 #logly-lift-widget-label-caption {
  padding: 5px 10px;
  
  background-color: #5C97FF;
  
  float: left;
}

#logly-lift-4279494 #logly-lift-widget-label-caption a {
  
  color: #FFFFFF;
  
  
  text-decoration: none;
}

#logly-lift-4279494 .logly-lift-ad {
  display: inline-block;
  zoom: 1;
  vertical-align:top;
  
  width: 100%;
  
  margin: 5px 0;
  padding: 0;
}



#logly-lift-4279494 .logly-lift-ad-image {
  
  vertical-align: top;
  width: 120px;
  height: 90px;
  padding-right: 0;
}

#logly-lift-4279494 .logly-lift-ad-image-inner {
  position: relative;
  overflow: hidden;
  width: 120px;
  height: 90px;
}

#logly-lift-4279494 .logly-lift-ad-image-inner a {
  display: block;
  height: 100%;
}

#logly-lift-4279494 .logly-lift-ad-image-inner a .logly-lift-ad-img-inner {
  height: 100%;
  background-position: center;
  background-size: cover;
}

#logly-lift-4279494 .logly-lift-ad-content {
  
  word-break: break-all;
}



#logly-lift-4279494 .logly-lift-ad-title {
  
  
}



#logly-lift-4279494 .logly-lift-ad-lead {
  
  
}



#logly-lift-4279494 a.logly-lift-ad-site {
  
  
}





#logly-lift-4279494 .logly-lift-ad-disclosure {
  
  
  
  text-align: left;
  
}

#logly-lift-4279494 .logly-lift-ad-disclosure a {
  
  
  color: #999999;
  
}

#logly-lift-4279494 .logly-lift-clear {
  clear: both;
}



#logly-lift-4279494 .ie-lte9 .logly-lift-ad {
  display: inline;
}

#logly-lift-toaster .logly-lift-credit,
#logly-lift-4279494 .logly-lift-credit {
  clear:both;
  padding:0 8px 10px;
  text-align:right;
}

#logly-lift-toaster .logly-lift-credit {
  padding-right:0;
}

#logly-lift-toaster .logly-lift-credit a,
#logly-lift-4279494 .logly-lift-credit a {
  color: #999;
  text-decoration: none;
  font-size:13px;
}

#logly-lift-toaster .logly-lift-credit a .logly-lift-credit-logo,
#logly-lift-4279494 .logly-lift-credit a .logly-lift-credit-logo {
  display:inline-block;
  background: url('https://cdn.logly.co.jp/spritesource-s5c12c753d2.webp') no-repeat 0 -103px;
  color:transparent;
  margin-left:3px;
  width:36px;
  height:14px;
  vertical-align:middle;
  *display:inline;
  *zoom:1;
}

#logly-lift-toaster .logly-lift-credit a:hover .logly-lift-credit-logo,
#logly-lift-4279494 .logly-lift-credit a:hover .logly-lift-credit-logo {
  background: url('https://cdn.logly.co.jp/spritesource-s5c12c753d2.webp') no-repeat 0 -117px;
}

#logly-lift-toaster .logly-lift-credit2 a .logly-lift-credit-logo,
#logly-lift-4279494 .logly-lift-credit2 a .logly-lift-credit-logo,
#logly-lift-toaster .logly-lift-credit2 a:hover .logly-lift-credit-logo,
#logly-lift-4279494 .logly-lift-credit2 a:hover .logly-lift-credit-logo,
#logly-lift-modal-contents-inner h3 {
  background-image: url('https://cdn.logly.co.jp/spritesource-v74j50a002.webp');
  background-repeat: no-repeat;
}

#logly-lift-toaster .logly-lift-credit2 a .logly-lift-credit-logo,
#logly-lift-4279494 .logly-lift-credit2 a .logly-lift-credit-logo {
  background-position: 0 -110px;
  height: 14px;
  width: 68px;
}

#logly-lift-toaster .logly-lift-credit2 a:hover .logly-lift-credit-logo,
#logly-lift-4279494 .logly-lift-credit2 a:hover .logly-lift-credit-logo {
  background-position: 0 -196px;
  height: 14px;
  width: 68px;
}
#logly-lift-modal-contents-inner h3 {
  background-position: 0 -232px;
  height: 40px;
  width: 194px;
}

#logly-lift-toaster .logly-lift-credit2 {
  padding-right: 0;
}
#logly-lift-toaster .logly-lift-credit2,
#logly-lift-4279494 .logly-lift-credit2 {
  clear: both;
  padding: 0 8px 10px;
  text-align: right;
}
#logly-lift-toaster .logly-lift-credit2 a,
#logly-lift-4279494 .logly-lift-credit2 a {
  color: #999;
  text-decoration: none;
  font-size: 11px;
}
#logly-lift-toaster .logly-lift-credit2 a .logly-lift-credit-logo,
#logly-lift-4279494 .logly-lift-credit2 a .logly-lift-credit-logo {
  display: inline-block;
  color: transparent;
  margin-left: 3px;
  vertical-align: middle;
  margin-top: -2px;
}
@media only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (min-device-pixel-ratio: 2),
(min-resolution: 2dppx) {
  #logly-lift-toaster .logly-lift-credit2 a .logly-lift-credit-logo,
  #logly-lift-4279494 .logly-lift-credit2 a .logly-lift-credit-logo {
    display: inline-block;
    background-position: 0 -62px;
    height: 14px;
    width: 68px;
    background-size: 106px 136px;
  }
}
@media only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (min-device-pixel-ratio: 2),
(min-resolution: 2dppx) {
  #logly-lift-toaster .logly-lift-credit2 a:hover .logly-lift-credit-logo,
  #logly-lift-4279494 .logly-lift-credit2 a:hover .logly-lift-credit-logo {
    display: inline-block;
    background-position: 0 -62px;
    height: 14px;
    width: 68px;
    background-size: 106px 136px;
  }
}

#logly-lift-4279494 .logly-lift-widget-video-content {
  padding: 20px;
  background: #fff;
}

#logly-lift-4279494 .logly-lift-video {
  width: auto;
  height: auto;
  margin: 0 -20px;
  position: relative;
  overflow: hidden;
  box-sizing: border-box;
  box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.17);
}

#logly-lift-4279494 .logly-lift-video-header {
  padding-bottom: 15px;
}

#logly-lift-4279494 .logly-lift-video-footer {
  padding-top: 15px;
}

#logly-lift-4279494 .logly-lift-video-header .logly-lift-video-headerlink,
#logly-lift-4279494 .logly-lift-video-footer .logly-lift-video-footerlink {
  display: block;
  text-decoration: none;
}

#logly-lift-4279494 .logly-lift-video-header .logly-lift-video-headerlink::after,
#logly-lift-4279494 .logly-lift-video-footer .logly-lift-video-footerlink::after {
  content: "";
  display: block;
  clear:both;
}

#logly-lift-4279494 .logly-lift-video-title {
  font-size: 16px;
  line-height: 25px;
  font-weight: bold;
  margin-bottom: 8px;
  color: #333;
}

#logly-lift-4279494 .logly-lift-video-adv {
  font-size: 11px;
  line-height: 1;
  color: #CCC;
  text-align: right;
}

#logly-lift-4279494 .logly-lift-video-cv {
  display: block;
  text-align: center;
  background: #4285f4;
  color: #FFF;
  border-radius: 3px;
}

#logly-lift-4279494 .logly-lift-video-cv:hover {
  opacity: 0.85;
}

/* type-1 */
#logly-lift-4279494 .logly-lift-video-type-1 .logly-lift-video-footer .logly-lift-video-title,
#logly-lift-4279494 .logly-lift-video-type-1 .logly-lift-video-header .logly-lift-video-adv {
  display: none;
}

#logly-lift-4279494 .logly-lift-video-type-1 .logly-lift-video-footer .logly-lift-video-adv {
  text-align: left;
}

#logly-lift-4279494 .logly-lift-video-type-1 .logly-lift-video-footer .logly-lift-video-cv {
  float: right;
  padding: 3px 20px;
  line-height: 1.8;
  font-size: 14px;
}

#logly-lift-4279494 .logly-lift-video-type-1 .logly-lift-video-footer .logly-lift-video-cv::before {
  content: "詳細を見る";
}


  /*
---
name: Login
category: LoglyFeed/Login
---

To reflect this design, you must copy and paste it to https://www.logly.co.jp design settings


!![](LoglyFeed/Login.html)
*/

#logly-lift-4279494 #logly-lift-widget-header {
  font-size: 16px;
  margin-bottom: 12px;
  font-weight: 400;
  font-feature-settings: "palt";
  position: relative;
}

#logly-lift-4279494 #logly-lift-widget-content {
  display: block;
  flex-wrap: wrap;
}

#logly-lift-4279494 .logly-lift-ad {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #e8e8e8;
  margin: 0;
  padding: 16px;
}

#logly-lift-4279494 .logly-lift-ad:first-child {
  border-top: 1px solid #e8e8e8;
}

#logly-lift-4279494 .logly-lift-ad .fa {
  color: #55c500;
  font-size: 40px;
}

#logly-lift-4279494 .logly-lift-ad .fa-fw {
  width: 40px;
  height: 40px;
  text-align: left;
}

#logly-lift-4279494 .logly-lift-ad-icon {
  overflow: hidden;
  border-radius: 0.2em;
  width: 40px;
  height: 40px;
  flex-shrink: 0;
  margin-top: 2px;
}

#logly-lift-4279494 .logly-lift-ad-icon img {
  width: 100%;
  height: 100%;
}

#logly-lift-4279494 .logly-lift-ad-content {
  display: block;
}

#logly-lift-4279494 .logly-lift-ad-link {
  margin-right: 8px;
}

#logly-lift-4279494 .logly-lift-ad-title {
  display: inline-block;
  font-size: 1.6rem;
  font-weight: bold;
  color: #333;
  line-height: 1.4;
  margin-bottom: 4px;
  word-wrap: break-word;
  word-break: break-all;
  margin-left: 8px;
}

#logly-lift-4279494 .logly-lift-ad-title:visited {
  color: #777;
}

#logly-lift-4279494 .logly-lift-ad-link:hover .logly-lift-ad-title {
  text-decoration: underline;
}

#logly-lift-4279494 .logly-lift-ad-author {
  display: block;
  color: #999;
  margin-left: 8px;
  font-size: 0.9rem;
}

#logly-lift-4279494 .logly-lift-ad-adv {
  display: block;
  color: #999;
  margin-left: 8px;
  font-size: 0.9rem;
}



</style><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(5).txt"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(6).txt"></script><script type="text/javascript" async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/f(7).txt"></script></head><body><iframe src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/sync.html" scrolling="no" style="display: none; border: none;"></iframe><div class="allWrapper"><div id="New2GlobalHeader-react-component-cf95db30-9d69-404c-b4f7-e49aed366ec1"><header class="st-NewHeader"><div class="st-NewHeader_container"><div class="st-NewHeader_start"><a href="https://qiita.com/" class="st-NewHeader_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a></div><div class="st-NewHeader_end"><form class="st-NewHeader_search" action="https://qiita.com/search" method="get"><span class="material-symbols-outlined st-NewHeader_searchIcon">search</span><input type="search" class="st-NewHeader_searchInput" autocomplete="off" placeholder="記事を検索" value="" name="q" required=""></form><form class="st-NewHeader_searchModal" action="https://qiita.com/search" method="get"><input type="text" class="st-NewHeader_searchModalInput" autocomplete="off" placeholder="記事を検索" value="" name="q" required=""></form><div class="st-NewHeader_searchButton"><span class="material-symbols-outlined st-NewHeader_searchButton_icon">search</span></div><div class="st-NewHeader_buttonWrapper"><div class="st-NewHeader_notifications" tabindex="0"><span class="material-symbols-outlined css-16hp9px" aria-label="お知らせ">notifications</span></div></div><div class="st-NewHeader_buttonWrapper"><div class="st-NewHeader_loginUser" tabindex="0"><img loading="lazy" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/1WQVUTyi_bigger.jpg" alt="Kuma80822459"></div><div class="st-NewHeader_dropdown"><a href="https://qiita.com/Kuma80822459" class="st-NewHeader_dropdownItem">マイページ</a><a href="https://qiita.com/stock" class="st-NewHeader_dropdownItem">ストックした記事</a><a href="https://qiita.com/badges" class="st-NewHeader_dropdownItem">獲得したバッジ</a><div class="st-NewHeader_dropdownDivider"></div><a href="https://qiita.com/drafts/new" class="st-NewHeader_dropdownItem">新規投稿（記事）</a><a href="https://qiita.com/questions/new" class="st-NewHeader_dropdownItem">新規投稿（質問）</a><a href="https://qiita.com/drafts" class="st-NewHeader_dropdownItem">下書き記事</a><a href="https://qiita.com/Kuma80822459/private" class="st-NewHeader_dropdownItem">限定共有記事</a><a href="https://qiita.com/patches" class="st-NewHeader_dropdownItem">編集リクエスト</a><hr class="st-NewHeader_dropdownDivider"><a href="https://qiita.com/organizations/dive_into_code_organization" class="st-Header_dropdownItem">DIVE INTO CODE（ダイブ イントゥ コード）</a><hr class="st-NewHeader_dropdownDivider"><a href="https://qiita.com/settings" class="st-NewHeader_dropdownItem">設定</a><hr class="st-NewHeader_dropdownDivider"><div class="st-NewHeader_dropdownItem" tabindex="0">ログアウト</div></div></div><div class="st-NewHeader_buttonWrapper ml-1"><button font-size="14" class="st-NewHeader_postButton css-ui6dca e1rb7ucl0">投稿する<span class="material-symbols-outlined st-NewHeader_postButton_icon">edit</span></button><div class="st-NewHeader_dropdown"><a href="https://qiita.com/drafts/new" class="st-NewHeader_dropdownItem">記事</a><a href="https://qiita.com/questions/new" class="st-NewHeader_dropdownItem">質問</a></div></div></div><div class="st-NewHeader_overlay"></div></div></header><div class="st-NewHeader_mainNavigation"><div class="st-NewHeader_navigationTabContainer"><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/">ホーム</a><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/timeline">タイムライン</a><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/trend">トレンド</a><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/question-trend">質問</a><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/official-events">公式イベント</a><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/official-columns">公式コラム</a><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/opportunities">募集</a><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/organizations">Organization</a><a class="st-NewHeader_mainNavigationItem" href="https://qiita.com/advent-calendar">アドベントカレンダー</a></div></div><div class="st-NewHeader_alertEmailConfirmBanner"><span class="fa fa-fw fa-exclamation-triangle"></span>メールアドレスが未認証です。<a href="https://qiita.com/settings/notifications">メールアドレス設定ページから認証を行なってください。</a><button class="st-NewHeader_alertEmailConfirmBannerCloseButton"><span class="fa fa-fw fa-times"></span></button></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="New2GlobalHeader" data-dom-id="New2GlobalHeader-react-component-cf95db30-9d69-404c-b4f7-e49aed366ec1">{"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":{"profileImageUrl":"https://pbs.twimg.com/profile_images/1565297707148644352/1WQVUTyi_bigger.jpg","urlName":"Kuma80822459"},"teamId":null,"url":"https://qiita.com/"}],"type":null,"isHideGlobalNavigation":false,"isShowTfaDownloadAlert":false}</script>
      
<div class="mainWrapper"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/rails","name":"Rails"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2021-03-14T11:47:44.000+09:00","dateModified":"2021-03-14T11:47:44.000+09:00","headline":"【Rails6】親モデルと一緒に複数の子レコードを一括で登録/編集するフォームの作り方","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-9f5428127621718a910c8b63951390ad.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTkxNiZ0eHQ9JUUzJTgwJTkwUmFpbHM2JUUzJTgwJTkxJUU4JUE2JUFBJUUzJTgzJUEyJUUzJTgzJTg3JUUzJTgzJUFCJUUzJTgxJUE4JUU0JUI4JTgwJUU3JUI3JTkyJUUzJTgxJUFCJUU4JUE0JTg3JUU2JTk1JUIwJUUzJTgxJUFFJUU1JUFEJTkwJUUzJTgzJUFDJUUzJTgyJUIzJUUzJTgzJUJDJUUzJTgzJTg5JUUzJTgyJTkyJUU0JUI4JTgwJUU2JThCJUFDJUUzJTgxJUE3JUU3JTk5JUJCJUU5JThDJUIyJTJGJUU3JUI3JUE4JUU5JTlCJTg2JUUzJTgxJTk5JUUzJTgyJThCJUUzJTgzJTk1JUUzJTgyJUE5JUUzJTgzJUJDJUUzJTgzJUEwJUUzJTgxJUFFJUU0JUJEJTlDJUUzJTgyJThBJUU2JTk2JUI5JnR4dC1jb2xvcj0lMjMyMTIxMjEmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTYmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWxlZnQlMkN0b3Amcz1hNGQ5OTA1YThhMTBlYTU3OWY4M2IwMWQ0NTk5YjJlMA\u0026mark-x=142\u0026mark-y=112\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTYxNiZ0eHQ9JTQwaGF0c3UmdHh0LWNvbG9yPSUyMzIxMjEyMSZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT0zNiZ0eHQtYWxpZ249bGVmdCUyQ3RvcCZzPWI4Zjg4MWEzODM3NDE0MDc0NzVmMjAxZGNkMWY1NGU4\u0026blend-x=142\u0026blend-y=491\u0026blend-mode=normal\u0026s=9484b58c6fbc00eb139e30aade4227bd","mainEntityOfPage":"https://qiita.com/hatsu/items/5465f29060945a615ecd","author":{"@type":"Person","address":"Tokyo","email":"hajiwata0308@gmail.com","identifier":"hatsu","name":"hatsu","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Fprofile-images%2F1559656090?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=0c9ca2cc08f850cdaf68a32fc6e5991c","url":"https://qiita.com/hatsu","description":"RailsとReactを触ること多いです","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><script>td.trackEvent('pageviews_article',{
    user_id: "2882158",
    article_id: "1405979",
    article_uuid: "5465f29060945a615ecd",
    td_description: "&quot;\nRuby on Railsで複数のモデル、複数のレコードを1つのフォームで一括登録/編集したい、Javascriptはあまり書かずに...という機会があったので、その実装について今回まとめてみました。\n\n\n## 完成イメージ\n\n\n- レシピのレコードと材料のレコードを同時に作成/編集できること\n- 材料レコードは一括で複数作成/編集できること\n\n![sample_complete_recipe.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/60770925-96bf-a5a6-6c86-99f7a9856a3c.gif)\n\n\nこの記事を終えると、こんなアプリが出来るようになります。\n\n## 前提\n\n#### バージョン\n\n- ruby 2.7.2\n- rails 6.1\n\n#### 扱うモデル\n\n- Recipe(レシピ) Model\n- Ingredient(材料) Model\n\nレシピは複数の材料を持っている\n\n![スクリーンショット 2021-03-13 22.05.15.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/ee896a30-b9b5-6131-f948-f13f8dbeba4b.png)\n\nこのような構成はすでに出来ている状態から始めます。具体的なmodelは以下を参考。\n\n#### app/models/recipe.rb\n\n```ruby\n# == Schema Information\n#\n# Table name: recipes\n#\n#  id         :integer          not null, primary key\n#  name       :string           not null\n#  created_at :datetime         not null\n#  updated_at :datetime         not null\n#\nclass Recipe \u0026amp;lt; ApplicationRecord\n  has_many :ingredients, dependent: :destroy\nend\n```\n\n#### app/models/ingredient.rb\n\n```ruby\n# == Schema Information\n#\n# Table name: ingredients\n#\n#  id         :integer          not null, primary key\n#  recipe_id  :integer          not null\n#  name       :string           not null\n#  created_at :datetime         not null\n#  updated_at :datetime         not null\n#\n# Indexes\n#\n#  index_ingredients_on_recipe_id  (recipe_id)\n#\n# Foreign Keys\n#\n#  recipe_id  (recipe_id =\u0026amp;gt; recipes.id)\n#\nclass Ingredient \u0026amp;lt; ApplicationRecord\n  belongs_to :recipe\nend\n```\n\n\n\n## 手順\n\nさてここから、完成を目指して一つずつ手順を記していきます\n\n### 1. accepts_nested_attributes_forを追加\n\napp/models/recipe.rbにaccepts_nested_attributes_forを追加します。\n\n```ruby\nclass Recipe \u0026amp;lt; ApplicationRecord\n  has_many :ingredients, dependent: :destroy\n  # ↓追加\n  accepts_nested_attributes_for :ingredients, allow_destroy: true, reject_if: :all_blank\nend\n```\n\n参考：ActiveRecord::NestedAttributes::ClassMethods\n\nhttps://api.rubyonrails.org/v6.1.0/classes/ActiveRecord/NestedAttributes/ClassMethods.html\n\n### 2. cocoonを追加\n\ncocoonとは、複数レコードをインタラクティブに追加、編集、削除を簡単に行うことが出来るようにするGem, Packageです\n\n1. Gemのcocoonをインストール\n\n    ↓のようにGemfileに[cocoon](https://github.com/nathanvda/cocoon)を追加して `bundle install`します\n\n     ```ruby\n   gem \u0026amp;quot;cocoon\u0026amp;quot;\n   ```\n\n2.  cocoonのpackage追加\n\n    ```s\n    yarn add @nathanvda/cocoon \n    ```  \n3.  app/javascripts/packs/application.js の編集\n\n    ```js\nimport Rails from \u0026amp;quot;@rails/ujs\u0026amp;quot;\nimport Turbolinks from \u0026amp;quot;turbolinks\u0026amp;quot;\nimport * as ActiveStorage from \u0026amp;quot;@rails/activestorage\u0026amp;quot;\nimport \u0026amp;quot;channels\u0026amp;quot;\n// これを追加\nimport \u0026amp;quot;@nathanvda/cocoon\u0026amp;quot;\nRails.start()\nTurbolinks.start()\nActiveStorage.start()\n```\n\n### 3. jqueryを使えるようにする\n\n1.  config/webpack/plugins/jquery.jsを作成\n\n    ```sh\n$ bundle exec rails webpack:install\n$ mkdir config/webpack/plugins/\n$ touch config/webpack/plugins/jquery.js\n```\n2. config/webpack/plugins/jquery.jsに以下を記述\n\n    ```js\nconst { environment } = require(\u0026amp;#39;@rails/webpacker\u0026amp;#39;)\nconst jquery = require(\u0026amp;#39;./plugins/jquery\u0026amp;#39;)\nenvironment.plugins.prepend(\u0026amp;#39;jquery\u0026amp;#39;, jquery)\nmodule.exports = environment\n```\n\n3. config/webpack/environment.js でjqueryを読み込む\n\n    ```js\nconst { environment } = require(\u0026amp;#39;@rails/webpacker\u0026amp;#39;)\nconst jquery = require(\u0026amp;#39;./plugins/jquery\u0026amp;#39;)\nenvironment.plugins.prepend(\u0026amp;#39;jquery\u0026amp;#39;, jquery)\nmodule.exports = environment\n```\n\n\n### 4. RecipeController作成とRoutesを設定\n\n1. `bundle exec rails g controller recipes`でController作成\n\n    ```s\n$ bundle exec rails g controller recipes\nRunning via Spring preloader in process 38240\n      create  app/controllers/recipes_controller.rb\n      invoke  erb\n      create    app/views/recipes\n      invoke  test_unit\n      create    test/controllers/recipes_controller_test.rb\n      invoke  helper\n      create    app/helpers/recipes_helper.rb\n      invoke    test_unit\n      invoke  assets\n      invoke    scss\n      create      app/assets/stylesheets/recipes.scss\n```\n\n2. config/routes.rbにrecipeのpathを追加\n\n    ```ruby\n    Rails.application.routes.draw do\n      root \u0026amp;quot;recipes#index\u0026amp;quot;\n      resources :recipes, only: [:index, :new, :create]\n    end\n```\n\n### 5. Recipeの一覧ページを作成\n\n1. app/controller/recipes_controller.rbにindexアクション追加\n\n    ```ruby\nclass RecipesController \u0026amp;lt; ApplicationController\n  def index\n    @recipes = Recipe.all\n  end\nend\n```\n\n2. Recipeの一覧ページを作成\n\n```shell\n$ touch app/views/recipes/index.html.erb\n```\n\n```erb\n\u0026amp;lt;h1\u0026amp;gt;レシピ一覧\u0026amp;lt;/h1\u0026amp;gt;\n\u0026amp;lt;ul\u0026amp;gt;\n  \u0026amp;lt;% @recipes.each do |recipe| %\u0026amp;gt;\n    \u0026amp;lt;li\u0026amp;gt;\u0026amp;lt;%= link_to recipe.name, edit_recipe_path(recipe) %\u0026amp;gt;\u0026amp;lt;/li\u0026amp;gt;\n    \u0026amp;lt;ul\u0026amp;gt;\n      \u0026amp;lt;% recipe.ingredients.each do |ingredient| %\u0026amp;gt;\n        \u0026amp;lt;li\u0026amp;gt;\u0026amp;lt;%= ingredient.name %\u0026amp;gt;\u0026amp;lt;/li\u0026amp;gt;\n      \u0026amp;lt;% end %\u0026amp;gt;\n    \u0026amp;lt;/ul\u0026amp;gt;\n  \u0026amp;lt;% end %\u0026amp;gt;\n\u0026amp;lt;/ul\u0026amp;gt;\n\u0026amp;lt;%= link_to \u0026amp;quot;レシピの新規作成\u0026amp;quot;, new_recipe_path %\u0026amp;gt;\n```\n\nするとこんなページが出来上がります\n\n![スクリーンショット 2021-03-14 2.19.11.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/d0937558-3db9-07b9-78f7-c9bd30bf6fb3.png)\n\n\n### 6. Recipeの新規作成ページを作成\n\n1. app/controller/recipes_controller.rbにnewアクション追加\n\n    ```ruby\nclass RecipesController \u0026amp;lt; ApplicationController\n  ~~ 省略 ~~~\n  def new\n    @recipe = Recipe.new\n  end\nend\n```\n\n2. app/views/recipes/new.html.erb を作成\n\n     ```shell\n$ touch app/views/recipes/new.html.erb\n```\n```erb\n\u0026amp;lt;h1\u0026amp;gt;レシピの新規作成\u0026amp;lt;/h1\u0026amp;gt;\n\u0026amp;lt;%= render \u0026amp;quot;recipes/form\u0026amp;quot;, model: @recipe %\u0026amp;gt;\n```\n3. app/views/recipes/_form.html.erbを作成\n\n    ```shell\n$ touch app/views/recipes/_form.html.erb\n```\n\n    ```erb\n    \u0026amp;lt;%= form_with model: model do |form| %\u0026amp;gt;\n      \u0026amp;lt;div\u0026amp;gt;\n        \u0026amp;lt;%= form.label :name, \u0026amp;quot;レシピ名\u0026amp;quot; %\u0026amp;gt;\n        \u0026amp;lt;%= form.text_field :name %\u0026amp;gt;\n     \u0026amp;lt;/div\u0026amp;gt;\n     \u0026amp;lt;div id=\u0026amp;quot;ingredients\u0026amp;quot;\u0026amp;gt;\n       \u0026amp;lt;%= link_to_add_association \u0026amp;#39;材料の追加\u0026amp;#39;, form, :ingredients,\n         data: { association_insertion_method: \u0026amp;#39;append\u0026amp;#39; } %\u0026amp;gt;\n       \u0026amp;lt;%= form.fields_for :ingredients do |ingredient| %\u0026amp;gt;]\n         \u0026amp;lt;%# ファイル名はingredient_fieldsにしてください %\u0026amp;gt;\n         \u0026amp;lt;%= render \u0026amp;quot;recipes/ingredient_fields\u0026amp;quot;, f: ingredient %\u0026amp;gt;\n       \u0026amp;lt;% end %\u0026amp;gt;\n      \u0026amp;lt;/div\u0026amp;gt;\n      \u0026amp;lt;%= form.submit \u0026amp;quot;作成する\u0026amp;quot; %\u0026amp;gt;\n  \u0026amp;lt;% end %\u0026amp;gt;\n```\n\n4. app/views/recipes/_ingredient_fields.html.erbを作成\n\n    ```shell\n$ touch app/views/recipes/_ingredient_fields.html.erb\n```\n\n```ruby\n\u0026amp;lt;div class=\u0026amp;quot;nested-fields\u0026amp;quot;\u0026amp;gt;\n  \u0026amp;lt;%= f.label :name, \u0026amp;quot;材料名\u0026amp;quot; %\u0026amp;gt;\n  \u0026amp;lt;%= f.text_field :name %\u0026amp;gt;\n  \u0026amp;lt;%= link_to_remove_association \u0026amp;quot;削除\u0026amp;quot;, f %\u0026amp;gt;\n\u0026amp;lt;/div\u0026amp;gt;\n```\n\nここまで行うと、以下のような画面になります\n\n![sample_recipe.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/0f43a399-4ebf-bc0f-3a72-d33aba101a5c.gif)\n\n\n### 7. レシピ、材料の作成(Create)アクションを作成\n\n```ruby\nclass RecipesController \u0026amp;lt; ApplicationController\n\n  def new\n    @recipe = Recipe.new\n  end\n  # ここから\n  def create\n    @recipe = Recipe.new\n    if @recipe.update(recipe_params)\n      redirect_to root_path\n    else\n      render :new\n    end\n  end\n\n  private\n\n  def recipe_params\n    # :idがないと毎回新しくレコードが作られてしまいます\n    # :_destroyがないと削除ができないです\n    params.require(:recipe).permit(:name, ingredients_attributes: [:id, :name, :_destroy])\n  end\n  # ここまで追加\nend\n\n```\n\ncreateアクションの追加が完了すると、レシピと材料を一括で作成してDBに保存する処理まで出来るようになります！\n\n\n### 8. レシピの編集ページを作成\n\n1. app/views/recipes/edit.html.erbの作成\n\n    ```sh\n$ touch app/views/recipes/edit.html.erb\n```\n\n2. app/views/recipes/edit.html.erbの編集\n\n    ```erb\n\u0026amp;lt;h1\u0026amp;gt;\u0026amp;lt;%= @recipe.name %\u0026amp;gt;の編集\u0026amp;lt;/h1\u0026amp;gt;\n\u0026amp;lt;%= render \u0026amp;quot;recipes/form\u0026amp;quot;, model: @recipe %\u0026amp;gt;\n```\n\n3. app/controllers/recipes_controller.rbの編集\n\n```ruby\nclass RecipesController \u0026amp;lt; ApplicationController\n~~ 省略 ~~\n  def edit\n    @recipe = Recipe.find(params[:id])\n  end\n~~ 省略 ~~\nend \n```\n\nこんなページが出来上がります\n![スクリーンショット 2021-03-14 2.28.55.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/f4876641-3ae1-8afe-59b5-bb26a17dc1da.png)\n\n\n### 9. レシピのupdateアクションを作成\n\napp/controllers/recipes_controller.rbにupdateアクションを追加\n\n```ruby\nclass RecipesController \u0026amp;lt; ApplicationController\n~~ 省略 ~~\n  def update\n    @recipe = Recipe.find(params[:id])\n    if @recipe.update(recipe_params)\n      redirect_to root_path\n    else\n      render :edit\n    end\n  end\n~~ 省略 ~~\nend \n```\n\nこれで一括の更新もできるようになりました！\n\n## 終わりに\n\n\n長かったですが、これで以上になります。\nあまりJavaScriptを書かずに動的にフォームの追加や削除をしたいということがあったので、今回のような実装について書きました。\n\n同じようなことがあればぜひご参考ください！\n\n\n\n&quot;",
    td_title: "&quot;【Rails6】親モデルと一緒に複数の子レコードを一括で登録/編集するフォームの作り方&quot;"
  })</script><img style="display:block;margin:0;padding:0;border:0;outline:0;width:0;height:0;line-height:0;" alt="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/bizmatrix"><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"ja","i18nDefaultLocale":"en","href":"https://qiita.com/hatsu/items/5465f29060945a615ecd","location":"/hatsu/items/5465f29060945a615ecd","scheme":"https","host":"qiita.com","port":null,"pathname":"/hatsu/items/5465f29060945a615ecd","search":null,"httpAcceptLanguage":"ja,en-US;q=0.9,en;q=0.8","actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"hxF6Hfvc+npz9LU8eDrh4QuPvLXsNhs8FLA+2J8ZBHxZU57b6N6OnNzHc78+nYskSskPeEv4Oyp4Dl9U+u7iCw==","locale":"ja","pushOne":{"accessToken":"4bc4bb057a0601d388a7b9e499ca2307e9eb4fc172804e310c59e511d7cac356","dialogImageUrl":"//cdn.qiita.com/assets/public/push_notification/image-qiitan-572179a3bbde375850422ea48b2b6272.png"}},"currentUser":{"encryptedId":"ccoReTSiztyGUazNjRkjce53qp9XDZbd--yPkkoTSOjAUG8vbg--1rKRIaJfcPz0IvAbdXkaww==","isBetaReleaseEnabled":false,"isEarlyAdapter":false,"isEmailConfirmed":false,"isJobseeker":false,"isStaff":false,"isTeamOnly":false,"name":"","newContribution":0,"originalId":2882158,"profileImageUrl":"https://pbs.twimg.com/profile_images/1565297707148644352/1WQVUTyi_bigger.jpg","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1565297707148644352%2F1WQVUTyi_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=80196121ecf776ff22e6ce415b228543","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1565297707148644352%2F1WQVUTyi_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=592d78099e78f062efeb3a968549b778","unreadNotificationsCount":0,"urlName":"Kuma80822459","remainingPublicImageUploadableSizeInCurrentMonth":104857600,"monthlyPublicImageUploadableSizeLimit":104857600,"organizations":{"edges":[{"node":{"encryptedId":"p66cc8uvbALIZ3EOO+JlI5WU0LJVF8yGF3ph--llP/LNOLehADDH0s--bAQgRPc+sbud7ai43Ti44A==","name":"DIVE INTO CODE（ダイブ イントゥ コード）","urlName":"dive_into_code_organization"}}],"totalCount":1}},"isLoggedIn":true,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","errorIconPath":"//cdn.qiita.com/assets/icons/large/missing-profile-image-828ed5829a93fbb35746a6c0f7c8107e.png","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-7348c38b-5c67-4384-a4f9-52bdaaf94410"><div class="css-1lqf3ug"><a href="https://qiita.com/advent-calendar/2022/works-hi-2" class="css-10bcla9">WHIの7つの「Value」にまつわる記事投稿で豪華プレゼントがもらえる🎁 Qiita Advent Calendar 2022開催中！</a><button aria-label="閉じる" class="css-1n29xqy"><span class="material-symbols-outlined css-1vy2f60" aria-hidden="true">close</span></button></div><div class=" css-1o89fic"><div class="css-yrmhnf"><div class="css-2pgeei"><div class="css-1duml6f"><div title="" role="" aria-label="animation" tabindex="0" style="width: 64px; height: 64px; overflow: hidden; margin: 0px auto; outline: none; left: 50%; position: absolute; top: 50%; transform: translate(-50%, -50%);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="64" height="64" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_2"><rect width="64" height="64" x="0" y="0"></rect></clippath></defs><g clip-path="url(#__lottie_element_2)"><g transform="matrix(1,0,0,1,11,11)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,21,21)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M0,-19 C0,-19 0,-19 0,-19 C10.493000030517578,-19 19,-10.494000434875488 19,0 C19,10.493000030517578 10.493000030517578,19 0,19 C-10.494000434875488,19 -19,10.493000030517578 -19,0 C-19,-10.494000434875488 -10.494000434875488,-19 0,-19z"></path><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(95,97,97)" stroke-opacity="1" stroke-width="2" d=" M0,-19 C0,-19 0,-19 0,-19 C10.493000030517578,-19 19,-10.494000434875488 19,0 C19,10.493000030517578 10.493000030517578,19 0,19 C-10.494000434875488,19 -19,10.493000030517578 -19,0 C-19,-10.494000434875488 -10.494000434875488,-19 0,-19z"></path></g></g><g transform="matrix(0.75,0,0,0.75,20,20)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,16.006000518798828,17.242000579833984)"><path fill="rgb(95,97,97)" fill-opacity="1" d=" M-1.8899999856948853,10.942999839782715 C-0.9020000100135803,11.854999542236328 0.890999972820282,11.868000030517578 1.878000020980835,10.968999862670898 C1.878000020980835,10.968999862670898 1.9570000171661377,10.895999908447266 1.9570000171661377,10.895999908447266 C8.734999656677246,4.71999979019165 13.170000076293945,0.6790000200271606 12.98900032043457,-4.359000205993652 C12.91100025177002,-6.573999881744385 11.781000137329102,-8.699999809265137 9.947999954223633,-9.951000213623047 C7.159999847412109,-11.868000030517578 3.8399999141693115,-11.314000129699707 1.465999960899353,-9.597999572753906 C0.9190000295639038,-9.20199966430664 0.4230000078678131,-8.744999885559082 -0.006000000052154064,-8.241999626159668 C-0.4339999854564667,-8.744999885559082 -0.9309999942779541,-9.201000213623047 -1.4789999723434448,-9.595999717712402 C-3.8519999980926514,-11.309000015258789 -7.171999931335449,-11.857000350952148 -9.960000038146973,-9.951000213623047 C-11.791999816894531,-8.699999809265137 -12.92300033569336,-6.573999881744385 -13.00100040435791,-4.359000205993652 C-13.170000076293945,0.6980000138282776 -8.711999893188477,4.751999855041504 -1.8899999856948853,10.942999839782715z M-11.001999855041504,-4.289999961853027 C-10.944999694824219,-5.89300012588501 -10.119999885559082,-7.420000076293945 -8.831999778747559,-8.298999786376953 C-8.831999778747559,-8.298999786376953 -8.831000328063965,-8.298999786376953 -8.831000328063965,-8.298999786376953 C-6.4730000495910645,-9.91100025177002 -3.3489999771118164,-9.081999778747559 -1.527999997138977,-6.945000171661377 C-1.527999997138977,-6.945000171661377 -0.6150000095367432,-5.872000217437744 -0.6150000095367432,-5.872000217437744 C-0.29499998688697815,-5.497000217437744 0.2840000092983246,-5.497000217437744 0.6029999852180481,-5.872000217437744 C0.6029999852180481,-5.872000217437744 1.5169999599456787,-6.945000171661377 1.5169999599456787,-6.945000171661377 C3.3410000801086426,-9.086999893188477 6.4629998207092285,-9.920000076293945 8.8149995803833,-8.303000450134277 C8.8149995803833,-8.303000450134277 8.821000099182129,-8.298999786376953 8.821000099182129,-8.298999786376953 C10.107999801635742,-7.420000076293945 10.934000015258789,-5.892000198364258 10.989999771118164,-4.288000106811523 C10.989999771118164,-4.288000106811523 10.989999771118164,-4.288000106811523 10.989999771118164,-4.288000106811523 C11.057000160217285,-2.437000036239624 10.300999641418457,-0.6209999918937683 8.501999855041504,1.6169999837875366 C6.672999858856201,3.8910000324249268 3.9860000610351562,6.3420000076293945 0.5320000052452087,9.489999771118164 C0.4790000021457672,9.538000106811523 0.30300000309944153,9.63700008392334 0.00800000037997961,9.635000228881836 C-0.28600001335144043,9.633000373840332 -0.47099998593330383,9.529999732971191 -0.5329999923706055,9.472999572753906 C-0.5329999923706055,9.472999572753906 -0.5389999747276306,9.467000007629395 -0.5389999747276306,9.467000007629395 C-0.5389999747276306,9.467000007629395 -0.5460000038146973,9.461999893188477 -0.5460000038146973,9.461999893188477 C-3.999000072479248,6.328000068664551 -6.683000087738037,3.882999897003174 -8.508999824523926,1.6130000352859497 C-10.305000305175781,-0.6200000047683716 -11.062999725341797,-2.437000036239624 -11.001999855041504,-4.289999961853027z"></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g></g></svg></div><button area-abel="いいね" title="いいね" class="css-nje458"></button></div><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd/likers" aria-label="7いいね" class="css-6vxoy2">7</a></div><div class="css-krcte5"><button area-label="ストック" title="ストック" class="css-yk0pbv"><svg class="css-uqvml5" height="32" viewBox="0 0 32 32" width="32" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 5H25.5C25.7761 5 26 5.22386 26 5.5V6.5C26 6.77614 25.7761 7 25.5 7H6.5C6.22386 7 6 6.77614 6 6.5V5.5C6 5.22386 6.22386 5 6.5 5ZM24 19V11.5C24 11.3674 23.9473 11.2402 23.8536 11.1464C23.7598 11.0527 23.6326 11 23.5 11H8.5C8.36739 11 8.24021 11.0527 8.14645 11.1464C8.05268 11.2402 8 11.3674 8 11.5V19C8 20.8565 8.7375 22.637 10.0503 23.9497C11.363 25.2625 13.1435 26 15 26H17C18.8565 26 20.637 25.2625 21.9497 23.9497C23.2625 22.637 24 20.8565 24 19ZM6.58579 9.58579C6.96086 9.21071 7.46957 9 8 9H24C24.5304 9 25.0391 9.21071 25.4142 9.58579C25.7893 9.96086 26 10.4696 26 11V19C26 21.3869 25.0518 23.6761 23.364 25.364C21.6761 27.0518 19.3869 28 17 28H15C12.6131 28 10.3239 27.0518 8.63604 25.364C6.94821 23.6761 6 21.3869 6 19V11C6 10.4696 6.21071 9.96086 6.58579 9.58579Z"></path></svg></button><span class="css-19m4w61">3</span></div><button aria-label="twitterでシェア" title="ツイート" class="css-ag7bw5" type="button"><svg class="css-1lt09u6" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m6.29 18.12c7.53 0 11.65-6.25 11.65-11.65 0-.18 0-.35 0-.53.8-.58 1.49-1.3 2.04-2.12-.73.33-1.53.54-2.36.65.85-.5 1.49-1.31 1.81-2.27-.79.47-1.67.81-2.6.99-.75-.8-1.81-1.29-2.99-1.29-2.26 0-4.1 1.84-4.1 4.1 0 .32.04.63.1.93-3.4-.17-6.42-1.81-8.44-4.28-.35.61-.55 1.31-.55 2.06 0 1.42.73 2.68 1.82 3.41-.67-.02-1.3-.21-1.85-.51v.06c0 1.98 1.41 3.64 3.28 4.02-.34.1-.7.14-1.08.14-.26 0-.52-.02-.77-.07.52 1.63 2.04 2.81 3.83 2.84-1.41 1.1-3.17 1.76-5.09 1.76-.33 0-.65-.02-.97-.06 1.81 1.15 3.96 1.83 6.27 1.83"></path></svg></button><button aria-label="facebookでシェア" title="Facebookでシェア" class="css-ag7bw5" type="button"><svg class="css-1lt09u6" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="m20 10c0-5.52-4.48-10-10-10s-10 4.48-10 10c0 4.99 3.66 9.13 8.44 9.88v-6.99h-2.54v-2.89h2.54v-2.2c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.24.2 2.24.2v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.77l-.44 2.89h-2.33v6.99c4.78-.75 8.44-4.89 8.44-9.88z"></path><path d="m13.89 12.89.44-2.89h-2.77v-1.88c0-.79.39-1.56 1.63-1.56h1.26v-2.46s-1.14-.2-2.24-.2c-2.28 0-3.78 1.38-3.78 3.89v2.2h-2.54v2.89h2.54v6.99c.51.08 1.03.12 1.56.12s1.05-.04 1.56-.12v-6.99h2.33z" fill="#fff"></path></svg></button><a href="https://b.hatena.ne.jp/entry/s/qiita.com/hatsu/items/5465f29060945a615ecd" target="_blank" class="css-1pj4960" aria-label="はてなブックマーク" title="はてなブックマーク"><svg class="css-1lt09u6" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><rect height="18" rx="3.67" width="18" x="1" y="1"></rect><g fill="#fff"><path d="m11.01 10.29c-.33-.36-.78-.57-1.36-.61.52-.14.89-.35 1.13-.62s.35-.64.35-1.11c0-.37-.08-.69-.24-.97s-.39-.5-.69-.67c-.26-.15-.58-.25-.94-.31-.37-.06-1.01-.09-1.93-.09h-2.24v8.18h2.31c.93 0 1.6-.03 2.01-.09s.75-.17 1.03-.32c.34-.18.61-.44.79-.77s.28-.72.28-1.15c0-.61-.16-1.09-.49-1.46zm-3.85-2.57h.48c.55 0 .93.06 1.12.19s.29.34.29.65-.1.5-.31.63c-.21.12-.58.18-1.13.18h-.45v-1.64zm1.9 4.69c-.22.13-.59.2-1.12.2h-.78v-1.79h.81c.54 0 .91.07 1.11.2.2.14.3.38.3.72 0 .31-.11.53-.33.66z"></path><path d="m13.87 12.02c-.57 0-1.04.46-1.04 1.04s.46 1.04 1.04 1.04 1.04-.46 1.04-1.04-.46-1.04-1.04-1.04z"></path><path d="m12.97 5.91h1.8v5.45h-1.8z"></path></g></svg></a><div class="css-79elbk"><button type="button" aria-label="オプションを開く" class="css-1ydfkyi"><span class="material-symbols-outlined css-1j8uoc8" aria-hidden="true">more_horiz</span></button><div class="st-Modal"><div class="st-Modal_backdrop"></div><div aria-modal="true" class="st-Modal_body css-rl6otz" role="dialog"><form><div class="st-Form"><span class="st-Form_label">どのような問題がありますか？</span></div><div class="st-Form"><label><input type="checkbox" class="st-Form_checkbox" value="CommunityGuidelineViolation">コミュニティガイドライン違反</label></div><div class="st-Form"><label><input type="checkbox" class="st-Form_checkbox" value="IllegalViolation">法律違反</label></div><div class="st-Form"><label><input type="checkbox" class="st-Form_checkbox" value="SociallyInappropriate">社会的に不適切</label></div><div class="st-Form"><label><input type="checkbox" class="st-Form_checkbox" value="SuspectedSpam">スパムの疑い</label></div><div class="st-Form st-Form-right"><button font-size="14" type="submit" disabled="" class="css-1d369es e1rb7ucl0">送信</button></div></form></div></div></div></div><div class="p-items_options"><div></div><div class="p-items_toc"><div class="css-1w9v0pi"><div class="css-38zwww"><ul>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E5%AE%8C%E6%88%90%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8" class="">完成イメージ</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E5%89%8D%E6%8F%90" class="">前提</a>
<ul>
<li>
<ul>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3" class="">バージョン</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E6%89%B1%E3%81%86%E3%83%A2%E3%83%87%E3%83%AB" class="">扱うモデル</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#appmodelsreciperb" class="">app/models/recipe.rb</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#appmodelsingredientrb" class="">app/models/ingredient.rb</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E6%89%8B%E9%A0%86" class="">手順</a>
<ul>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#1-accepts_nested_attributes_for%E3%82%92%E8%BF%BD%E5%8A%A0" class="">1. accepts_nested_attributes_forを追加</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#2-cocoon%E3%82%92%E8%BF%BD%E5%8A%A0" class="">2. cocoonを追加</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#4-recipecontroller%E4%BD%9C%E6%88%90%E3%81%A8routes%E3%82%92%E8%A8%AD%E5%AE%9A" class="">4. RecipeController作成とRoutesを設定</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#5-recipe%E3%81%AE%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90" class="">5. Recipeの一覧ページを作成</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#6-recipe%E3%81%AE%E6%96%B0%E8%A6%8F%E4%BD%9C%E6%88%90%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90" class="focus">6. Recipeの新規作成ページを作成</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#7-%E3%83%AC%E3%82%B7%E3%83%94%E6%9D%90%E6%96%99%E3%81%AE%E4%BD%9C%E6%88%90create%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90">7. レシピ、材料の作成(Create)アクションを作成</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#8-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AE%E7%B7%A8%E9%9B%86%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90">8. レシピの編集ページを作成</a>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#9-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AEupdate%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90">9. レシピのupdateアクションを作成</a>
</li>
</ul>
</li>
<li>
<a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB">終わりに</a>
</li>
</ul>
</div></div></div></div><div class="p-items_main"><div class="css-irwgf6"><div class="css-1uawg69"><span class="material-symbols-outlined css-1btebg9" aria-hidden="true">info</span><p>この記事は最終更新日から1年以上が経過しています。</p></div><div class="css-8qb8m4"><div class="css-17zza1i"><div><div class="css-70qvj9"><a href="https://qiita.com/hatsu" class="css-6su6fj"><img class="css-n4w850" height="24" loading="lazy" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/1559656090" width="24"></a><div class="css-1r4slzx"><a href="https://qiita.com/hatsu" class="css-772dpg">@<!-- -->hatsu</a></div></div><div class="css-17ay39c"><p class="css-1ay9vb9">投稿日 <time datetime="2021-03-14T02:47:44Z">2021年03月14日</time></p></div></div></div><h1 class="css-8py6gv">【Rails6】親モデルと一緒に複数の子レコードを一括で登録/編集するフォームの作り方</h1><div class="css-157eoh6"><span class="material-symbols-outlined css-1je2il4" aria-hidden="true">sell</span><div class="css-f6bdq2"><a href="https://qiita.com/tags/rails" class="css-1ij24kf">Rails</a><span class="css-z1o26v">,</span><a href="https://qiita.com/tags/cocoon" class="css-1ij24kf">cocoon</a></div></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>Ruby on Railsで複数のモデル、複数のレコードを1つのフォームで一括登録/編集したい、Javascriptはあまり書かずに...という機会があったので、その実装について今回まとめてみました。</p>

<h2>
<span id="完成イメージ" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E5%AE%8C%E6%88%90%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>完成イメージ</h2>

<ul>
<li>レシピのレコードと材料のレコードを同時に作成/編集できること</li>
<li>材料レコードは一括で複数作成/編集できること</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/532ed70af6abd433ed125e34c4deb83bca69f77a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f36303737303932352d393662662d613561362d366338362d3939663761393835366133632e676966" target="_blank" rel="nofollow noopener"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_107345_60770925-96bf-a5a6-6c86-99f7a9856a3c.gif" alt="sample_complete_recipe.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/60770925-96bf-a5a6-6c86-99f7a9856a3c.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2F60770925-96bf-a5a6-6c86-99f7a9856a3c.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=85924b14fd7ecbfa0a06e8aaaac2e3aa 1x" loading="lazy"></a></p>

<p>この記事を終えると、こんなアプリが出来るようになります。</p>

<h2>
<span id="前提" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E5%89%8D%E6%8F%90"><i class="fa fa-link"></i></a>前提</h2>

<h4>
<span id="バージョン" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>バージョン</h4>

<ul>
<li>ruby 2.7.2</li>
<li>rails 6.1</li>
</ul>

<h4>
<span id="扱うモデル" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E6%89%B1%E3%81%86%E3%83%A2%E3%83%87%E3%83%AB"><i class="fa fa-link"></i></a>扱うモデル</h4>

<ul>
<li>Recipe(レシピ) Model</li>
<li>Ingredient(材料) Model</li>
</ul>

<p>レシピは複数の材料を持っている</p>

<p><a href="https://camo.qiitausercontent.com/87e9355181baf66e1f071a93f5765a2b06c34786/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f65653839366133302d623962352d363133312d663934382d6631336638646265626134622e706e67" target="_blank" rel="nofollow noopener"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_107345_ee896a30-b9b5-6131-f948-f13f8dbeba4b.png" alt="スクリーンショット 2021-03-13 22.05.15.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/ee896a30-b9b5-6131-f948-f13f8dbeba4b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Fee896a30-b9b5-6131-f948-f13f8dbeba4b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=47b3bd20a73c62de216ed1f627e7f7ec 1x" loading="lazy"></a></p>

<p>このような構成はすでに出来ている状態から始めます。具体的なmodelは以下を参考。</p>

<h4>
<span id="appmodelsreciperb" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#appmodelsreciperb"><i class="fa fa-link"></i></a>app/models/recipe.rb</h4>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="c1"># == Schema Information</span>
<span class="c1">#</span>
<span class="c1"># Table name: recipes</span>
<span class="c1">#</span>
<span class="c1">#  id         :integer          not null, primary key</span>
<span class="c1">#  name       :string           not null</span>
<span class="c1">#  created_at :datetime         not null</span>
<span class="c1">#  updated_at :datetime         not null</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">Recipe</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_many</span> <span class="ss">:ingredients</span><span class="p">,</span> <span class="ss">dependent: :destroy</span>
<span class="k">end</span>
</code></pre></div></div>

<h4>
<span id="appmodelsingredientrb" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#appmodelsingredientrb"><i class="fa fa-link"></i></a>app/models/ingredient.rb</h4>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="c1"># == Schema Information</span>
<span class="c1">#</span>
<span class="c1"># Table name: ingredients</span>
<span class="c1">#</span>
<span class="c1">#  id         :integer          not null, primary key</span>
<span class="c1">#  recipe_id  :integer          not null</span>
<span class="c1">#  name       :string           not null</span>
<span class="c1">#  created_at :datetime         not null</span>
<span class="c1">#  updated_at :datetime         not null</span>
<span class="c1">#</span>
<span class="c1"># Indexes</span>
<span class="c1">#</span>
<span class="c1">#  index_ingredients_on_recipe_id  (recipe_id)</span>
<span class="c1">#</span>
<span class="c1"># Foreign Keys</span>
<span class="c1">#</span>
<span class="c1">#  recipe_id  (recipe_id =&gt; recipes.id)</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">Ingredient</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:recipe</span>
<span class="k">end</span>
</code></pre></div></div>

<h2>
<span id="手順" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>手順</h2>

<p>さてここから、完成を目指して一つずつ手順を記していきます</p>

<h3>
<span id="1-accepts_nested_attributes_forを追加" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#1-accepts_nested_attributes_for%E3%82%92%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>1. accepts_nested_attributes_forを追加</h3>

<p>app/models/recipe.rbにaccepts_nested_attributes_forを追加します。</p>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">Recipe</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_many</span> <span class="ss">:ingredients</span><span class="p">,</span> <span class="ss">dependent: :destroy</span>
  <span class="c1"># ↓追加</span>
  <span class="n">accepts_nested_attributes_for</span> <span class="ss">:ingredients</span><span class="p">,</span> <span class="ss">allow_destroy: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">reject_if: :all_blank</span>
<span class="k">end</span>
</code></pre></div></div>

<p>参考：ActiveRecord::NestedAttributes::ClassMethods</p>

<p><qiita-embed-ogp src="https://api.rubyonrails.org/v6.1.0/classes/ActiveRecord/NestedAttributes/ClassMethods.html"></qiita-embed-ogp></p>

<h3>
<span id="2-cocoonを追加" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#2-cocoon%E3%82%92%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>2. cocoonを追加</h3>

<p>cocoonとは、複数レコードをインタラクティブに追加、編集、削除を簡単に行うことが出来るようにするGem, Packageです</p>

<ol>
<li>
<p>Gemのcocoonをインストール</p>

<p>↓のようにGemfileに<a href="https://github.com/nathanvda/cocoon" rel="nofollow noopener" target="_blank">cocoon</a>を追加して <code>bundle install</code>します</p>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="n">gem</span> <span class="s2">"cocoon"</span>
</code></pre></div></div>
</li>
<li>
<p>cocoonのpackage追加</p>

<div class="code-frame" data-lang="s"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="n">yarn</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">@</span><span class="n">nathanvda</span><span class="o">/</span><span class="n">cocoon</span><span class="w"> 
</span></code></pre></div></div>
</li>
<li>
<p>app/javascripts/packs/application.js の編集</p>

<div class="code-frame" data-lang="js"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="k">import</span> <span class="nx">Rails</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@rails/ujs</span><span class="dl">"</span>
<span class="k">import</span> <span class="nx">Turbolinks</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">turbolinks</span><span class="dl">"</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">ActiveStorage</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@rails/activestorage</span><span class="dl">"</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span>
<span class="c1">// これを追加</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">@nathanvda/cocoon</span><span class="dl">"</span>
<span class="nx">Rails</span><span class="p">.</span><span class="nx">start</span><span class="p">()</span>
<span class="nx">Turbolinks</span><span class="p">.</span><span class="nx">start</span><span class="p">()</span>
<span class="nx">ActiveStorage</span><span class="p">.</span><span class="nx">start</span><span class="p">()</span>
</code></pre></div></div>
</li>
</ol>

<h3>
<span id="3-jqueryを使えるようにする" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#3-jquery%E3%82%92%E4%BD%BF%E3%81%88%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3. jqueryを使えるようにする</h3>

<ol>
<li>
<p>config/webpack/plugins/jquery.jsを作成</p>

<div class="code-frame" data-lang="sh"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nv">$ </span>bundle <span class="nb">exec </span>rails webpack:install
<span class="nv">$ </span><span class="nb">mkdir </span>config/webpack/plugins/
<span class="nv">$ </span><span class="nb">touch </span>config/webpack/plugins/jquery.js
</code></pre></div></div>
</li>
<li>
<p>config/webpack/plugins/jquery.jsに以下を記述</p>

<div class="code-frame" data-lang="js"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">environment</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@rails/webpacker</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">jquery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./plugins/jquery</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">environment</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">,</span> <span class="nx">jquery</span><span class="p">)</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">environment</span>
</code></pre></div></div>
</li>
<li>
<p>config/webpack/environment.js でjqueryを読み込む</p>

<div class="code-frame" data-lang="js"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">environment</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@rails/webpacker</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">jquery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./plugins/jquery</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">environment</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">,</span> <span class="nx">jquery</span><span class="p">)</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">environment</span>
</code></pre></div></div>
</li>
</ol>

<h3>
<span id="4-recipecontroller作成とroutesを設定" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#4-recipecontroller%E4%BD%9C%E6%88%90%E3%81%A8routes%E3%82%92%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>4. RecipeController作成とRoutesを設定</h3>

<ol>
<li>
<p><code>bundle exec rails g controller recipes</code>でController作成</p>

<div class="code-frame" data-lang="s"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="o">$</span><span class="w"> </span><span class="n">bundle</span><span class="w"> </span><span class="n">exec</span><span class="w"> </span><span class="n">rails</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">recipes</span><span class="w">
</span><span class="n">Running</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">preloader</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="m">38240</span><span class="w">
  </span><span class="n">create</span><span class="w">  </span><span class="n">app</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">recipes_controller.rb</span><span class="w">
  </span><span class="n">invoke</span><span class="w">  </span><span class="n">erb</span><span class="w">
  </span><span class="n">create</span><span class="w">    </span><span class="n">app</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">recipes</span><span class="w">
  </span><span class="n">invoke</span><span class="w">  </span><span class="n">test_unit</span><span class="w">
  </span><span class="n">create</span><span class="w">    </span><span class="n">test</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">recipes_controller_test.rb</span><span class="w">
  </span><span class="n">invoke</span><span class="w">  </span><span class="n">helper</span><span class="w">
  </span><span class="n">create</span><span class="w">    </span><span class="n">app</span><span class="o">/</span><span class="n">helpers</span><span class="o">/</span><span class="n">recipes_helper.rb</span><span class="w">
  </span><span class="n">invoke</span><span class="w">    </span><span class="n">test_unit</span><span class="w">
  </span><span class="n">invoke</span><span class="w">  </span><span class="n">assets</span><span class="w">
  </span><span class="n">invoke</span><span class="w">    </span><span class="n">scss</span><span class="w">
  </span><span class="n">create</span><span class="w">      </span><span class="n">app</span><span class="o">/</span><span class="n">assets</span><span class="o">/</span><span class="n">stylesheets</span><span class="o">/</span><span class="n">recipes.scss</span><span class="w">
</span></code></pre></div></div>
</li>
<li>
<p>config/routes.rbにrecipeのpathを追加</p>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"recipes#index"</span>
  <span class="n">resources</span> <span class="ss">:recipes</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span><span class="ss">:index</span><span class="p">,</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">:create</span><span class="p">]</span>
<span class="k">end</span>
</code></pre></div></div>
</li>
</ol>

<h3>
<span id="5-recipeの一覧ページを作成" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#5-recipe%E3%81%AE%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>5. Recipeの一覧ページを作成</h3>

<ol>
<li>
<p>app/controller/recipes_controller.rbにindexアクション追加</p>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">RecipesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
<span class="k">def</span> <span class="nf">index</span>
<span class="vi">@recipes</span> <span class="o">=</span> <span class="no">Recipe</span><span class="p">.</span><span class="nf">all</span>
<span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
</li>
<li><p>Recipeの一覧ページを作成</p></li>
</ol>

<div class="code-frame" data-lang="shell"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nv">$ </span><span class="nb">touch </span>app/views/recipes/index.html.erb
</code></pre></div></div>

<div class="code-frame" data-lang="erb"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nt">&lt;h1&gt;</span>レシピ一覧<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@recipes</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">recipe</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">recipe</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="n">edit_recipe_path</span><span class="p">(</span><span class="n">recipe</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="cp">&lt;%</span> <span class="n">recipe</span><span class="p">.</span><span class="nf">ingredients</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">ingredient</span><span class="o">|</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">ingredient</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"レシピの新規作成"</span><span class="p">,</span> <span class="n">new_recipe_path</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>するとこんなページが出来上がります</p>

<p><a href="https://camo.qiitausercontent.com/1700ed5d2c1fca591240ecdebbc94784463d7cda/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f64303933373535382d336462392d303762392d373866372d6339626433306266366662332e706e67" target="_blank" rel="nofollow noopener"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_107345_d0937558-3db9-07b9-78f7-c9bd30bf6fb3.png" alt="スクリーンショット 2021-03-14 2.19.11.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/d0937558-3db9-07b9-78f7-c9bd30bf6fb3.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Fd0937558-3db9-07b9-78f7-c9bd30bf6fb3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0729ed3d995a7ea1838701319fd99ea1 1x" loading="lazy"></a></p>

<h3>
<span id="6-recipeの新規作成ページを作成" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#6-recipe%E3%81%AE%E6%96%B0%E8%A6%8F%E4%BD%9C%E6%88%90%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>6. Recipeの新規作成ページを作成</h3>

<ol>
<li>
<p>app/controller/recipes_controller.rbにnewアクション追加</p>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">RecipesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
<span class="o">~~</span> <span class="err">省略</span> <span class="o">~~~</span>
<span class="k">def</span> <span class="nf">new</span>
<span class="vi">@recipe</span> <span class="o">=</span> <span class="no">Recipe</span><span class="p">.</span><span class="nf">new</span>
<span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
</li>
<li>
<p>app/views/recipes/new.html.erb を作成</p>

<div class="code-frame" data-lang="shell"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nv">$ </span><span class="nb">touch </span>app/views/recipes/new.html.erb
</code></pre></div></div>

<div class="code-frame" data-lang="erb"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nt">&lt;h1&gt;</span>レシピの新規作成<span class="nt">&lt;/h1&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"recipes/form"</span><span class="p">,</span> <span class="ss">model: </span><span class="vi">@recipe</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
</li>
<li>
<p>app/views/recipes/_form.html.erbを作成</p>

<div class="code-frame" data-lang="shell"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nv">$ </span><span class="nb">touch </span>app/views/recipes/_form.html.erb
</code></pre></div></div>

<div class="code-frame" data-lang="erb"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="n">model</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:name</span><span class="p">,</span> <span class="s2">"レシピ名"</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:name</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
 <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ingredients"</span><span class="nt">&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">link_to_add_association</span> <span class="s1">'材料の追加'</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="ss">:ingredients</span><span class="p">,</span>
     <span class="ss">data: </span><span class="p">{</span> <span class="ss">association_insertion_method: </span><span class="s1">'append'</span> <span class="p">}</span> <span class="cp">%&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">fields_for</span> <span class="ss">:ingredients</span> <span class="k">do</span> <span class="o">|</span><span class="n">ingredient</span><span class="o">|</span> <span class="cp">%&gt;</span>]
     <span class="c">&lt;%# ファイル名はingredient_fieldsにしてください %&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"recipes/ingredient_fields"</span><span class="p">,</span> <span class="ss">f: </span><span class="n">ingredient</span> <span class="cp">%&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="s2">"作成する"</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
</li>
<li>
<p>app/views/recipes/_ingredient_fields.html.erbを作成</p>

<div class="code-frame" data-lang="shell"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nv">$ </span><span class="nb">touch </span>app/views/recipes/_ingredient_fields.html.erb
</code></pre></div></div>
</li>
</ol>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"nested-fields"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sx">%= f.label :name, "材料名" %&gt;
  &lt;%=</span> <span class="n">f</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:name</span> <span class="o">%&gt;</span>
  <span class="o">&lt;</span><span class="sx">%= link_to_remove_association "削除", f %&gt;
&lt;/div&gt;
</span></code></pre></div></div>

<p>ここまで行うと、以下のような画面になります</p>

<p><a href="https://camo.qiitausercontent.com/def1284d00e76b57d56a17e34a1596ffecaa97ab/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f30663433613339392d346562662d626330662d336137322d6433336162613130316135632e676966" target="_blank" rel="nofollow noopener"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_107345_0f43a399-4ebf-bc0f-3a72-d33aba101a5c.gif" alt="sample_recipe.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/0f43a399-4ebf-bc0f-3a72-d33aba101a5c.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2F0f43a399-4ebf-bc0f-3a72-d33aba101a5c.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=de9b36781e771759d982acbfdd288ac1 1x" loading="lazy"></a></p>

<h3>
<span id="7-レシピ材料の作成createアクションを作成" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#7-%E3%83%AC%E3%82%B7%E3%83%94%E6%9D%90%E6%96%99%E3%81%AE%E4%BD%9C%E6%88%90create%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>7. レシピ、材料の作成(Create)アクションを作成</h3>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">RecipesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@recipe</span> <span class="o">=</span> <span class="no">Recipe</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>
  <span class="c1"># ここから</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@recipe</span> <span class="o">=</span> <span class="no">Recipe</span><span class="p">.</span><span class="nf">new</span>
    <span class="k">if</span> <span class="vi">@recipe</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">recipe_params</span><span class="p">)</span>
      <span class="n">redirect_to</span> <span class="n">root_path</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:new</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">recipe_params</span>
    <span class="c1"># :idがないと毎回新しくレコードが作られてしまいます</span>
    <span class="c1"># :_destroyがないと削除ができないです</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:recipe</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">ingredients_attributes: </span><span class="p">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:_destroy</span><span class="p">])</span>
  <span class="k">end</span>
  <span class="c1"># ここまで追加</span>
<span class="k">end</span>

</code></pre></div></div>

<p>createアクションの追加が完了すると、レシピと材料を一括で作成してDBに保存する処理まで出来るようになります！</p>

<h3>
<span id="8-レシピの編集ページを作成" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#8-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AE%E7%B7%A8%E9%9B%86%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>8. レシピの編集ページを作成</h3>

<ol>
<li>
<p>app/views/recipes/edit.html.erbの作成</p>

<div class="code-frame" data-lang="sh"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nv">$ </span><span class="nb">touch </span>app/views/recipes/edit.html.erb
</code></pre></div></div>
</li>
<li>
<p>app/views/recipes/edit.html.erbの編集</p>

<div class="code-frame" data-lang="erb"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@recipe</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span>の編集<span class="nt">&lt;/h1&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"recipes/form"</span><span class="p">,</span> <span class="ss">model: </span><span class="vi">@recipe</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
</li>
<li><p>app/controllers/recipes_controller.rbの編集</p></li>
</ol>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">RecipesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
<span class="o">~~</span> <span class="err">省略</span> <span class="o">~~</span>
  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@recipe</span> <span class="o">=</span> <span class="no">Recipe</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="o">~~</span> <span class="err">省略</span> <span class="o">~~</span>
<span class="k">end</span> 
</code></pre></div></div>

<p>こんなページが出来上がります<br>
<a href="https://camo.qiitausercontent.com/b3fdd5be7f9aabd69833321bc4c4bd281d5e2a59/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f66343837363634312d336165312d386166652d353962352d6262323661313764633164612e706e67" target="_blank" rel="nofollow noopener"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/https___qiita-image-store.s3.ap-northeast-1.amazonaws.com_0_107345_f4876641-3ae1-8afe-59b5-bb26a17dc1da.png" alt="スクリーンショット 2021-03-14 2.28.55.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/f4876641-3ae1-8afe-59b5-bb26a17dc1da.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Ff4876641-3ae1-8afe-59b5-bb26a17dc1da.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=986d685e40e65cd132ffe7c7feb43ce6 1x" loading="lazy"></a></p>

<h3>
<span id="9-レシピのupdateアクションを作成" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#9-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AEupdate%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>9. レシピのupdateアクションを作成</h3>

<p>app/controllers/recipes_controller.rbにupdateアクションを追加</p>

<div class="code-frame" data-lang="ruby"><div class="code-copy"><div class="code-copy__message" style="display: none;">Copied!</div><button class="code-copy__button" style="display: none;"><span class="fa fa-fw fa-clipboard"></span></button></div><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">RecipesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
<span class="o">~~</span> <span class="err">省略</span> <span class="o">~~</span>
  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@recipe</span> <span class="o">=</span> <span class="no">Recipe</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="k">if</span> <span class="vi">@recipe</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">recipe_params</span><span class="p">)</span>
      <span class="n">redirect_to</span> <span class="n">root_path</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:edit</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="o">~~</span> <span class="err">省略</span> <span class="o">~~</span>
<span class="k">end</span> 
</code></pre></div></div>

<p>これで一括の更新もできるようになりました！</p>

<h2>
<span id="終わりに" class="fragment"></span><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>終わりに</h2>

<p>長かったですが、これで以上になります。<br>
あまりJavaScriptを書かずに動的にフォームの追加や削除をしたいということがあったので、今回のような実装について書きました。</p>

<p>同じようなことがあればぜひご参考ください！</p>
</div></div></section><div class="css-r2q46l"><button aria-label="twitterでシェア" title="ツイート" class="css-186gyuo" type="button"><svg class="css-1lt09u6" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m6.29 18.12c7.53 0 11.65-6.25 11.65-11.65 0-.18 0-.35 0-.53.8-.58 1.49-1.3 2.04-2.12-.73.33-1.53.54-2.36.65.85-.5 1.49-1.31 1.81-2.27-.79.47-1.67.81-2.6.99-.75-.8-1.81-1.29-2.99-1.29-2.26 0-4.1 1.84-4.1 4.1 0 .32.04.63.1.93-3.4-.17-6.42-1.81-8.44-4.28-.35.61-.55 1.31-.55 2.06 0 1.42.73 2.68 1.82 3.41-.67-.02-1.3-.21-1.85-.51v.06c0 1.98 1.41 3.64 3.28 4.02-.34.1-.7.14-1.08.14-.26 0-.52-.02-.77-.07.52 1.63 2.04 2.81 3.83 2.84-1.41 1.1-3.17 1.76-5.09 1.76-.33 0-.65-.02-.97-.06 1.81 1.15 3.96 1.83 6.27 1.83"></path></svg></button><button aria-label="facebookでシェア" title="Facebookでシェア" class="css-186gyuo" type="button"><svg class="css-1lt09u6" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="m20 10c0-5.52-4.48-10-10-10s-10 4.48-10 10c0 4.99 3.66 9.13 8.44 9.88v-6.99h-2.54v-2.89h2.54v-2.2c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.24.2 2.24.2v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.77l-.44 2.89h-2.33v6.99c4.78-.75 8.44-4.89 8.44-9.88z"></path><path d="m13.89 12.89.44-2.89h-2.77v-1.88c0-.79.39-1.56 1.63-1.56h1.26v-2.46s-1.14-.2-2.24-.2c-2.28 0-3.78 1.38-3.78 3.89v2.2h-2.54v2.89h2.54v6.99c.51.08 1.03.12 1.56.12s1.05-.04 1.56-.12v-6.99h2.33z" fill="#fff"></path></svg></button><a href="https://b.hatena.ne.jp/entry/s/qiita.com/hatsu/items/5465f29060945a615ecd" target="_blank" class="css-1opxprl" aria-label="はてなブックマーク" title="はてなブックマーク"><svg class="css-1lt09u6" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><rect height="18" rx="3.67" width="18" x="1" y="1"></rect><g fill="#fff"><path d="m11.01 10.29c-.33-.36-.78-.57-1.36-.61.52-.14.89-.35 1.13-.62s.35-.64.35-1.11c0-.37-.08-.69-.24-.97s-.39-.5-.69-.67c-.26-.15-.58-.25-.94-.31-.37-.06-1.01-.09-1.93-.09h-2.24v8.18h2.31c.93 0 1.6-.03 2.01-.09s.75-.17 1.03-.32c.34-.18.61-.44.79-.77s.28-.72.28-1.15c0-.61-.16-1.09-.49-1.46zm-3.85-2.57h.48c.55 0 .93.06 1.12.19s.29.34.29.65-.1.5-.31.63c-.21.12-.58.18-1.13.18h-.45v-1.64zm1.9 4.69c-.22.13-.59.2-1.12.2h-.78v-1.79h.81c.54 0 .91.07 1.11.2.2.14.3.38.3.72 0 .31-.11.53-.33.66z"></path><path d="m13.87 12.02c-.57 0-1.04.46-1.04 1.04s.46 1.04 1.04 1.04 1.04-.46 1.04-1.04-.46-1.04-1.04-1.04z"></path><path d="m12.97 5.91h1.8v5.45h-1.8z"></path></g></svg></a></div></div><div><div class="css-irwgf6"><div><div class="css-1gx4cfw"><div class="css-1hp6i1l"><div id="dfp-slot-article-after-body-for-mobile-login-user" class="ad-300x250" data-test-adunitpath="/383564218/qiita.com_loginuser_under-article_mobile" elementtiming="gpt-dfp-slot-article-after-body-for-mobile-login-user" data-testid="ArticleAdsAfterBody_AdUnit" data-google-query-id="CMvIufCb7_sCFbtfDwIdIQoIXw"><div id="google_ads_iframe_/383564218/qiita.com_loginuser_under-article_mobile_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/383564218/qiita.com_loginuser_under-article_mobile_0" name="google_ads_iframe_/383564218/qiita.com_loginuser_under-article_mobile_0" title="3rd party ad content" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" role="region" aria-label="Advertisement" tabindex="0" style="border: 0px; vertical-align: bottom;" data-load-complete="true" data-google-container-id="1" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/saved_resource.html"></iframe></div></div></div></div></div></div><div class="css-t4s1qt"><div class="css-lkue19"><div id="logly-lift-4279494"><div id="logly-lift-widget">  <div id="logly-lift-widget-header">    <span>関連記事</span>    <span class="logly-lift-credit logly-lift-credit2"><a href="https://www.logly.co.jp/privacy.html" target="_top" rel="nofollow noopener">Recommended by <span class="logly-lift-credit-logo" title="logly"></span></a></span>  </div>  <div id="logly-lift-widget-content">    <div class="logly-lift-ad">  <span class="logly-lift-ad-icon"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/4795bc7869ccc6d2d544bcef6d15d2f0.webp" width="18"></span>  <div　class="logly-lift-ad-content">    <a class="logly-lift-ad-link" href="https://qiita.com/d0ne1s/items/16b0815bb5bc0ed13eb8" target="_top" style="text-decoration:none;" data-click-url="https://dsp.logly.co.jp/click?ad=4AG4hpsDG-QO7LuDmp_-D4GnvP-ZgHZomCtDeAVBYkshzGyllbridJq8YxSYF8OM5SZHXj9hiPqx2F6Kl4D5-MfviQAqzqYeavAHUcIojtVi_SIFUbgV3VGmR5qDIASxHsUcaVTQkkO4956SRf3B-xr9abZSmGUu41OKpSNhD6BN2HD8LP2G84C-3tyZmAvhW2iVzxVBHhPXujSf-TcExEAqN3UcqCDMqRUlfjFCJsu7fGSuzychD4cnML3ANZIMvCYaFPBkEN_JBQ6XtjBoZee5sQwBu9XJYmlY7sg7kD3bjvAMtLBBe7T-A27hvsWrRxMHCTabxVaEUB3m5_e8UX0iGRAHFD_zmEGH9A2RuDqiZkzzyzufdkT6dTJXUTx7Al0Fw-T08JF2OyGGdFSGgDKEDhAMh5ZE11qfp8UmfWHB30HNaeO8WX9qUQrmWC_KEXnPz3DXevg9csyoNakzNUzdfXe0P1FDFw6c2st5v5tKW-PjaNQEHGpUDFwfjubcHXVhQgve0HRQMfTnUi8vXG8aUNnh020w97h6MebuOng">      <span class="logly-lift-ad-title">Railsプロジェクト作成時にやること全まとめ</span>    </a>    <span class="logly-lift-ad-author">by d0ne1s</span><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/abc" width="1" height="1" style="position: absolute; width: 1px; height: 1px; top: -32767px; left: -32767px;" alt="">  </div　class="logly-lift-ad-content"></div></div><div class="logly-lift-ad">  <span class="logly-lift-ad-icon"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/7f2619c8a6f8ecfbc24f6e33d7ef3c3e.webp" width="18"></span>  <div　class="logly-lift-ad-content">    <a class="logly-lift-ad-link" href="https://qiita.com/itoytr/items/fb1ea251197003deec12" target="_top" style="text-decoration:none;" data-click-url="https://dsp.logly.co.jp/click?ad=4AG4hpsDG-QO7LuDmp_-D4GnvP-ZgHZomCtDeAVBYkutIYK_5wBz7IcdJJ6wQbM3DODhHDhVDa5IPGIIbHRFGMUgc5yv32hKWRWpiczWMClTpNuNLY83ZohhAeYA7YnT5Ev0etQUlhKlnpLDAcp2r6hHCNfNlMwI2PcHg15I-zv2BZhzgDysl_fXXO_J8ruNXLAqDbKdADnGbL3KSNbXbK-qz9QYgh8UT1H-TimZULwnlSKCU0NJq6602sMgef8qiRuPJ38rtRIwzL3MzIsKOy7tnHxjqqyfh4CaQmZAeraMkqGDWiwAqCZCCpHmtEl7is15QX8pQJu5wOSGdUeuFkERNi5uEZZstH3ZZRZwWyQJ47xw4o3uwKS6bKYdDOWNyablDf0mSym3mRp3-4sXXAOlBfxBz-wSiKHtt8_-Bkb12wh_theDtPaYwVdSiezV1h9c9C150aAmH3pscdDr-ctnWTsACgYWtgxs6mfxeERGYYAuaXrFxmJ5tiGdCOrhHPLU-JhjwIfqk5ig2zOmJ_q_A7tMvfOrNlQCEHFPgjE">      <span class="logly-lift-ad-title">Railsで404/500エラーの処理</span>    </a>    <span class="logly-lift-ad-author">by itoytr</span>  </div　class="logly-lift-ad-content"></div></div><div class="logly-lift-ad">  <span class="logly-lift-ad-icon"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/4795bc7869ccc6d2d544bcef6d15d2f0(1).webp" width="18"></span>  <div　class="logly-lift-ad-content">    <a class="logly-lift-ad-link" href="https://qiita.com/d0ne1s/items/5e63dde992f20f25b8bb" target="_top" style="text-decoration:none;" data-click-url="https://dsp.logly.co.jp/click?ad=4AG4hpsDG-QO7LuDmp_-D4GnvP-ZgHZomCtDeAVBYksOuFw4zbmPHJoLhndfRStc73AXy59nGmP2GPjLQudob1c2KVBw-hhImjLJ4VOl_EhylK176K-Fk3LINggwwpvELVSa51PuIC53lswf4Wm8ylL0m_7PS8R0KqrLwp0XJEd2rJCEoI1LgtECqhT145_VA_9P6Rhic2xLB9hlCrbjXr2JNTxNtLenbCZ1e9cWDkKZZLx7OL48TAUWxE31pR7LxiiTSBpDiVl9zhDhpjk2Ngmp9fNPYRPDhq_SckhxXyOlYtq4aGZw00to1W5L_6kFNcOQligPS_Wo0FD_L8_FciC7SBnxrzuidm4F3_breCuzNt2FfxqOLcbGp2D9hm1eL2L9SicGZnJThaZoO-YG9AFSTIHQt5SknalFGJNBdueqkflNCqeJHmfUtixA1TEi-taCh_ARshCAU8ITsQ-i3g0L1UtrU6fIlgOqXTc1nNx8ONqTGygx_TiQdslOdM6o6nCkfALOv7b0njJw-hAS6vTqpn0P4CAY-seIvWKV1oQ">      <span class="logly-lift-ad-title">Ruby on Railsで簡単なアプリを作成</span>    </a>    <span class="logly-lift-ad-author">by d0ne1s</span>  </div　class="logly-lift-ad-content"></div><div class="logly-lift-ad">  <span class="logly-lift-ad-icon"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/09996279841b1092c26c668f521fb89f.webp" width="18"></span>  <div　class="logly-lift-ad-content">    <a class="logly-lift-ad-link" href="https://qiita.com/oekazuma/items/21e940fa0952e9672a6f" target="_top" style="text-decoration:none;" data-click-url="https://dsp.logly.co.jp/click?ad=4AG4hpsDG-QO7LuDmp_-D4GnvP-ZgHZomCtDeAVBYktijKM8lXYBDWr1YQIzSbRfzPrwPcWqIdZ8xan-UNH--T6FLmMpAqfJZcrFY3LE-QvAnN5izPU7itt3BRBeQs30nvz2EMzGzxO8V0T3hqYmAlvPbWFxq09Sx2WL-FwNwMW0dW4fcUG8MTzvnbmjAMWK4eIeTEsPB7m5PoHneGCT8dBPd4MZqDMy3aUQdF5nTvVBMjl2-vTQV4-DYzVZqHlcxnNwXxCe6ITITDX3QO7mYmR6hXOfvmKmB_zSvNjLGHqe1FySojpqJs_6ShGkN8lcTK-DIMujyuLmiXLHtmbmmFLGe7OkxXzwAa20TOOULHWNahLgWrtK5bM-hXf3bZtROQSWkBJ4SQJy0M9rV_x_1fZhuFcFp38ms2UtwLhibKUB2PdPvHRNPBh79YNRp1xf-hn85_j1j-Y94iKQ4Tv94fqO0pWpK0aGBWH4jrasTicSzGJxUCUo74GyEyyi-ufo84m6IeSxYKvJtn7LCIF2IkvWzrhCS11HEDpzNFotn7en6FCzCCok-A">      <span class="logly-lift-ad-title">Ruby on Railsで落とし物報告サイト(掲示板風)をつくってみた</span>    </a>    <span class="logly-lift-ad-author">by oekazuma</span>  </div　class="logly-lift-ad-content"></div><div class="logly-lift-ad">    <span class="logly-lift-ad-icon"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/normal.webp" width="18"></span>    <div　class="logly-lift-ad-content">      <a class="logly-lift-ad-link" href="https://dsp.logly.co.jp/click?ad=4AG4hpsDG-QO7LuDmp_-D4GnvP-ZgHZoHz5Oc1iDOYCSJBfAwfYPcFNDW2wvYh4fM6yrgT0QaLdLvOabDCeBvOWKxPFvbfk6_WIK7NI_mnLj3FVaGjEDzeUeMDbH_RJyczIgmahpN2rtKdmJqzmY77cu4vXiomVI4rEOHq7J9Ar7PP3a_rck0peEEZiuBB0HAU6m_omLXnRYpcyUT3WAdIVQHVdhLG4fvJgwiUj0EowmAAI2LO5Frx9gLBFKKoTLWDjculwxjrD7BQZMiCHqVsVrapvU0XuLWXp6hFSDGLehRdlcoVOeoGo_lLE3sXHfEzouJnjGqfzDURjt4-LrwiRYzhkI11rHCq8fHV5W7T2gvR4G6JH1Wr6YFrzh_7Nr7ekdnb3DmreBx1cfNjoj579htYbYsRLYqZSiQ08b2K2kGfR-ep0bG3Rj-eQm1Sff-J3Im1owQ73gWAGNrPJVtW-FfJJ22o5OUfJGmqfTUCjnEvPcwCC3mWFsPM_LB7AuK3T4dzUhDYiJop8QXY9qLm9KMRx8CgRb79E-t83QOoD2K_qf3jzBuQ" target="_blank" style="text-decoration:none;" rel="nofollow noopener">        <span class="logly-lift-ad-title">「ブースト」専用ボタン搭載！ 新型「glo hyper X2」徹底解説</span>      </a><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/bc" width="1" height="1" style="position: absolute; width: 1px; height: 1px; top: -32767px; left: -32767px;" alt="">      <span class="logly-lift-ad-adv">PR ブリティッシュ･アメリカン･タバコ</span>    </div　class="logly-lift-ad-content"></div><div class="logly-lift-ad">    <span class="logly-lift-ad-icon"><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/normal(1).webp" width="18"></span>    <div　class="logly-lift-ad-content">      <a class="logly-lift-ad-link" href="https://dsp.logly.co.jp/click?ad=4AG4hpsDG-QO7LuDmp_-D4GnvP-ZgHZoHz5Oc1iDOYDy12PJGQRg9R8elL99Prliz6wgqaGpykYJE8V0qbHBJtnEZc-jnkyVjsRAZqS6q5PnYpzh4ymk2QNGM2SgwlsvrBMhwr053TFe-WArdDORXJZDssC8U_laL_nuDN_OtZ1pDUQ2zQsgj4V9deLmI5A86DHPCywRBxKGpyUA_99S5AbclWAMouTHPG_icDVuJ78hdoQjQ5KmxGTS8Cmch_3RxZ4xIDUBbtoe3vLV0FRZoUXRam62wghAM2bptVz1X-Iv-4l7qjOgK_hJUTiEED83y79EmZPlI4t8SepbEMXc74piNVrF9BTwRmBu9oAnZrcmfcZvYaLubFrUgJVPHE5tWNX-5qoqikK98EX467tA9AJunUjYBWfub7BIgyu9TAhopxQsOvinOaaX8ctilO5CvtYX5cCYDLYwxH3iAZRiAhU88dTfgXsAO8av_kntrHiUz2dzgE-oVAv4-dQnqmEgNh_bSSmSC8rRV9xU0_taQhbVYMmQnU2s3gYko0UMOG6S-_unysTXZw" target="_blank" style="text-decoration:none;" rel="nofollow noopener">        <span class="logly-lift-ad-title">操作性UP！ 加熱式たばこの新型「glo hyper X2」徹底解説！</span>      </a><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/bc(1)" width="1" height="1" style="position: absolute; width: 1px; height: 1px; top: -32767px; left: -32767px;" alt="">      <span class="logly-lift-ad-adv">PR ブリティッシュ･アメリカン･タバコ</span>    </div　class="logly-lift-ad-content"></div>    <div class="logly-lift-clear"></div></div></div></div><div class="css-t4s1qt" style=""><div id="comments" class="css-8atqhb"><p class="css-1r0y2zt">コメント</p><div class="css-1gbpb5n">この記事にコメントはありません。</div><div class="css-16ai9md"><div><div class="css-34ji4n e1kr2j5i0"><img class="css-r74j4e" height="36" loading="lazy" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/1WQVUTyi_bigger.jpg" width="36"><p class="css-psofcd e1kr2j5i1">投稿する</p></div><div class="css-ym3ymj e1kr2j5i2"><div class="css-90e8ha e1kr2j5i3"><div class="css-1r573w3 e1kr2j5i4"><button type="button" class="css-1ewnrzu e1kr2j5i5">編集</button><button type="button" class="css-1a8c0sr e1kr2j5i5">プレビュー</button></div><div class="css-gmuwbf e1kr2j5i6"><a href="https://qiita.com/Qiita/items/c686397e4a0f4f11683d" target="_blank" aria-label="Markdownの書き方" class=" css-5plhoq e1kr2j5i8"><span class="material-symbols-outlined css-qlae57" aria-hidden="true">help</span></a><button type="button" aria-label="絵文字を選択" class=" css-1jqn8du e1kr2j5i7"><span class="material-symbols-outlined css-zuurwf" aria-hidden="true">sentiment_satisfied</span></button></div></div><div class="css-hpgf8j e1kr2j5i11"><textarea disabled="" placeholder="テキストを入力" class="css-1qhd8wo e1kr2j5i13" style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 100px;"></textarea><div class="co-Item_text css-5ldyj5 e1kr2j5i12" style="display: none; margin-bottom: 0px;"><div class="co-Item_text"></div></div><div class="css-on5s5d e1kr2j5i14"><span class="css-p9qzma e1kr2j5i17">メールアドレスの認証が完了後、コメントの投稿が可能になります。</span><button font-size="14" disabled="" class="css-ui6dca e1rb7ucl0" style="margin-left: auto;">投稿</button></div></div></div><input type="file" style="display: none;"></div></div></div></div></div></div></div><div class="css-gimjo7"><div class="css-5jpx49"><div class="css-10h2231"><div class="css-1duml6f"><div title="" role="" aria-label="animation" tabindex="0" style="width: 64px; height: 64px; overflow: hidden; margin: 0px auto; outline: none; left: 50%; position: absolute; top: 50%; transform: translate(-50%, -50%);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="64" height="64" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_43"><rect width="64" height="64" x="0" y="0"></rect></clippath></defs><g clip-path="url(#__lottie_element_43)"><g transform="matrix(1,0,0,1,11,11)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,21,21)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M0,-19 C0,-19 0,-19 0,-19 C10.493000030517578,-19 19,-10.494000434875488 19,0 C19,10.493000030517578 10.493000030517578,19 0,19 C-10.494000434875488,19 -19,10.493000030517578 -19,0 C-19,-10.494000434875488 -10.494000434875488,-19 0,-19z"></path><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(95,97,97)" stroke-opacity="1" stroke-width="2" d=" M0,-19 C0,-19 0,-19 0,-19 C10.493000030517578,-19 19,-10.494000434875488 19,0 C19,10.493000030517578 10.493000030517578,19 0,19 C-10.494000434875488,19 -19,10.493000030517578 -19,0 C-19,-10.494000434875488 -10.494000434875488,-19 0,-19z"></path></g></g><g transform="matrix(0.75,0,0,0.75,20,20)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,16.006000518798828,17.242000579833984)"><path fill="rgb(95,97,97)" fill-opacity="1" d=" M-1.8899999856948853,10.942999839782715 C-0.9020000100135803,11.854999542236328 0.890999972820282,11.868000030517578 1.878000020980835,10.968999862670898 C1.878000020980835,10.968999862670898 1.9570000171661377,10.895999908447266 1.9570000171661377,10.895999908447266 C8.734999656677246,4.71999979019165 13.170000076293945,0.6790000200271606 12.98900032043457,-4.359000205993652 C12.91100025177002,-6.573999881744385 11.781000137329102,-8.699999809265137 9.947999954223633,-9.951000213623047 C7.159999847412109,-11.868000030517578 3.8399999141693115,-11.314000129699707 1.465999960899353,-9.597999572753906 C0.9190000295639038,-9.20199966430664 0.4230000078678131,-8.744999885559082 -0.006000000052154064,-8.241999626159668 C-0.4339999854564667,-8.744999885559082 -0.9309999942779541,-9.201000213623047 -1.4789999723434448,-9.595999717712402 C-3.8519999980926514,-11.309000015258789 -7.171999931335449,-11.857000350952148 -9.960000038146973,-9.951000213623047 C-11.791999816894531,-8.699999809265137 -12.92300033569336,-6.573999881744385 -13.00100040435791,-4.359000205993652 C-13.170000076293945,0.6980000138282776 -8.711999893188477,4.751999855041504 -1.8899999856948853,10.942999839782715z M-11.001999855041504,-4.289999961853027 C-10.944999694824219,-5.89300012588501 -10.119999885559082,-7.420000076293945 -8.831999778747559,-8.298999786376953 C-8.831999778747559,-8.298999786376953 -8.831000328063965,-8.298999786376953 -8.831000328063965,-8.298999786376953 C-6.4730000495910645,-9.91100025177002 -3.3489999771118164,-9.081999778747559 -1.527999997138977,-6.945000171661377 C-1.527999997138977,-6.945000171661377 -0.6150000095367432,-5.872000217437744 -0.6150000095367432,-5.872000217437744 C-0.29499998688697815,-5.497000217437744 0.2840000092983246,-5.497000217437744 0.6029999852180481,-5.872000217437744 C0.6029999852180481,-5.872000217437744 1.5169999599456787,-6.945000171661377 1.5169999599456787,-6.945000171661377 C3.3410000801086426,-9.086999893188477 6.4629998207092285,-9.920000076293945 8.8149995803833,-8.303000450134277 C8.8149995803833,-8.303000450134277 8.821000099182129,-8.298999786376953 8.821000099182129,-8.298999786376953 C10.107999801635742,-7.420000076293945 10.934000015258789,-5.892000198364258 10.989999771118164,-4.288000106811523 C10.989999771118164,-4.288000106811523 10.989999771118164,-4.288000106811523 10.989999771118164,-4.288000106811523 C11.057000160217285,-2.437000036239624 10.300999641418457,-0.6209999918937683 8.501999855041504,1.6169999837875366 C6.672999858856201,3.8910000324249268 3.9860000610351562,6.3420000076293945 0.5320000052452087,9.489999771118164 C0.4790000021457672,9.538000106811523 0.30300000309944153,9.63700008392334 0.00800000037997961,9.635000228881836 C-0.28600001335144043,9.633000373840332 -0.47099998593330383,9.529999732971191 -0.5329999923706055,9.472999572753906 C-0.5329999923706055,9.472999572753906 -0.5389999747276306,9.467000007629395 -0.5389999747276306,9.467000007629395 C-0.5389999747276306,9.467000007629395 -0.5460000038146973,9.461999893188477 -0.5460000038146973,9.461999893188477 C-3.999000072479248,6.328000068664551 -6.683000087738037,3.882999897003174 -8.508999824523926,1.6130000352859497 C-10.305000305175781,-0.6200000047683716 -11.062999725341797,-2.437000036239624 -11.001999855041504,-4.289999961853027z"></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g></g></svg></div><button area-abel="いいね" title="いいね" class="css-nje458"></button></div><a href="https://qiita.com/hatsu/items/5465f29060945a615ecd/likers" aria-label="7いいね" class="css-15rblvx">7</a></div><div class="css-92283"><button area-label="ストック" title="ストック" class="css-yk0pbv"><svg class="css-uqvml5" height="32" viewBox="0 0 32 32" width="32" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 5H25.5C25.7761 5 26 5.22386 26 5.5V6.5C26 6.77614 25.7761 7 25.5 7H6.5C6.22386 7 6 6.77614 6 6.5V5.5C6 5.22386 6.22386 5 6.5 5ZM24 19V11.5C24 11.3674 23.9473 11.2402 23.8536 11.1464C23.7598 11.0527 23.6326 11 23.5 11H8.5C8.36739 11 8.24021 11.0527 8.14645 11.1464C8.05268 11.2402 8 11.3674 8 11.5V19C8 20.8565 8.7375 22.637 10.0503 23.9497C11.363 25.2625 13.1435 26 15 26H17C18.8565 26 20.637 25.2625 21.9497 23.9497C23.2625 22.637 24 20.8565 24 19ZM6.58579 9.58579C6.96086 9.21071 7.46957 9 8 9H24C24.5304 9 25.0391 9.21071 25.4142 9.58579C25.7893 9.96086 26 10.4696 26 11V19C26 21.3869 25.0518 23.6761 23.364 25.364C21.6761 27.0518 19.3869 28 17 28H15C12.6131 28 10.3239 27.0518 8.63604 25.364C6.94821 23.6761 6 21.3869 6 19V11C6 10.4696 6.21071 9.96086 6.58579 9.58579Z"></path></svg></button><span class="css-1o09fmu">3</span></div><div class="css-79elbk"><button type="button" aria-label="オプションを開く" class="css-1ydfkyi"><span class="material-symbols-outlined css-1j8uoc8" aria-hidden="true">more_horiz</span></button><div class="st-Modal"><div class="st-Modal_backdrop"></div><div aria-modal="true" class="st-Modal_body css-rl6otz" role="dialog"><form><div class="st-Form"><span class="st-Form_label">どのような問題がありますか？</span></div><div class="st-Form"><label><input type="checkbox" class="st-Form_checkbox" value="CommunityGuidelineViolation">コミュニティガイドライン違反</label></div><div class="st-Form"><label><input type="checkbox" class="st-Form_checkbox" value="IllegalViolation">法律違反</label></div><div class="st-Form"><label><input type="checkbox" class="st-Form_checkbox" value="SociallyInappropriate">社会的に不適切</label></div><div class="st-Form"><label><input type="checkbox" class="st-Form_checkbox" value="SuspectedSpam">スパムの疑い</label></div><div class="st-Form st-Form-right"><button font-size="14" type="submit" disabled="" class="css-1d369es e1rb7ucl0">送信</button></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-7348c38b-5c67-4384-a4f9-52bdaaf94410">{"authorAnalyticsTrackingId":"UA-81051454-20","headerBanner":{"bannerDisplayKey":"header_text_banner_displayed","bannerPath":"/advent-calendar/2022/works-hi-2","bannerText":"WHIの7つの「Value」にまつわる記事投稿で豪華プレゼントがもらえる🎁 Qiita Advent Calendar 2022開催中！"},"organizationAnalyticsTrackingId":null,"promptLoginMessageImageSrc":"//cdn.qiita.com/assets/public/image-qiitan_for_login_modal-014e085d3e40a240e3fe8d61b70b29a9.png","adventCalendarPromptModalQiitanUrl":"//cdn.qiita.com/assets/public/image-qiitan_for_advent_calendar-cc72df910cf1cd5b31e54b0494602884.png","isAdventCalendarPromptShow":false}</script>
      
<script src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/td_qt_access.js" type="text/javascript"></script><script>microadTd.QT.start({"article_category": "Rails,cocoon"})</script><script>(function(d,u){var b=d.getElementsByTagName("script")[0],j=d.createElement("script");j.async=true;j.src=u;b.parentNode.insertBefore(j,b);})(document,"//img.ak.impact-ad.jp/ut/ff9a3577423c8ed5_4330.js");</script><noscript><iframe frameborder="0" height="0" src="//nspt.unitag.jp/ff9a3577423c8ed5_4330.php" width="0"></iframe></noscript><script async="" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/js(4)"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'AW-878053044');</script><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1792588824374455');
fbq('track', 'PageView');</script><noscript><img height="1" src="https://www.facebook.com/tr?id=1792588824374455&amp;ev=PageView&amp;noscript=1" style="display:none" width="1" /></noscript></div><footer id="globalfooter" class="st-footer"><div class="st-footer_container"><div class="st-footer_start"><div class="st-footer_signature"><a class="st-footer_logo" aria-label="トップに戻る" href="https://qiita.com/"><svg alt="" role="presentation" viewBox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-footer_catchcopy">How developers code is here.</div></div><small class="st-footer_copyright">© 2011-2022<span class="ml-1of2" translate="no">Qiita Inc.</span></small></div><nav class="st-footer_navigation"><dl class="st-footer_menu"><dt class="st-footer_menuTitle">ガイドとヘルプ</dt><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/about">About</a></dd><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/terms">利用規約</a></dd><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/privacy">プライバシーポリシー</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="http://help.qiita.com/ja/articles/qiita-community-guideline">ガイドライン</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://help.qiita.com/ja/articles/others-brand-guideline">デザインガイドライン</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://github.com/increments/qiita-discussions/discussions/116">ご意見</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://help.qiita.com/">ヘルプ</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">広告掲載</a></dd></dl><dl class="st-footer_menu"><dt class="st-footer_menuTitle">コンテンツ</dt><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/release-notes">リリースノート</a></dd><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/official-events">公式イベント</a></dd><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/official-columns">公式コラム</a></dd><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/opportunities">募集</a></dd><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/advent-calendar/2022">アドベントカレンダー</a></dd><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/qiita-award">Qiita 表彰プログラム</a></dd><dd class="st-footer_menuItem"><a class="st-footer_menuLink" href="https://qiita.com/api/v2/docs">API</a></dd></dl><dl class="st-footer_menu"><dt class="st-footer_menuTitle">SNS</dt><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://twitter.com/qiita"><img width="14" height="14" loading="lazy" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/icon-twitter_white-e2c0b9c49029b0e4e4118a06a7f75e4d.svg"><span class="ml-1of2">Qiita（キータ）公式</span></a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://twitter.com/qiita_milestone"><img width="14" height="14" loading="lazy" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/icon-twitter_white-e2c0b9c49029b0e4e4118a06a7f75e4d.svg"><span class="ml-1of2">Qiita マイルストーン</span></a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://twitter.com/qiitapoi"><img width="14" height="14" loading="lazy" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/icon-twitter_white-e2c0b9c49029b0e4e4118a06a7f75e4d.svg"><span class="ml-1of2">Qiita 人気の投稿</span></a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://www.facebook.com/qiita/"><img width="14" height="14" loading="lazy" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/icon-facebook_white-f010f8b99b612698389aa7d0682d4ebe.svg"><span class="ml-1of2">Qiita（キータ）公式</span></a></dd></dl><dl class="st-footer_menu"><dt class="st-footer_menuTitle">Qiita 関連サービス</dt><dd class="st-footer_menuItem"><a target="_blank" rel="noopener" class="st-footer_menuLink" href="https://teams.qiita.com/">Qiita Team</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener" class="st-footer_menuLink" href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener" class="st-footer_menuLink" href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener noreferrer" class="st-footer_menuLink" href="https://suzuri.jp/qiita">Qiita 公式ショップ</a></dd></dl><dl class="st-footer_menu"><dt class="st-footer_menuTitle">運営</dt><dd class="st-footer_menuItem"><a target="_blank" rel="noopener" class="st-footer_menuLink" href="https://corp.qiita.com/company/">運営会社</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener" class="st-footer_menuLink" href="https://corp.qiita.com/jobs/">採用情報</a></dd><dd class="st-footer_menuItem"><a target="_blank" rel="noopener" class="st-footer_menuLink" href="https://blog.qiita.com/">Qiita Blog</a></dd></dl></nav></div></footer><div id="Snackbar-react-component-ad40a218-93c2-4a18-8504-43ded25af6aa"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-ad40a218-93c2-4a18-8504-43ded25af6aa">{}</script>
      
<div id="LoginModal-react-component-3d14dbf6-cc99-4a3a-b1dc-6f04eefc959c"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-3d14dbf6-cc99-4a3a-b1dc-6f04eefc959c">{"imageUrl":"//cdn.qiita.com/assets/public/image-qiitan_for_login_modal-014e085d3e40a240e3fe8d61b70b29a9.png"}</script>
      
<div id="StockModal-react-component-2b32b114-73cb-4a85-9b2f-f0facad432c7"><div class="st-Modal"><div class="st-Modal_backdrop"></div><div aria-modal="true" class="st-Modal_body css-1mzx5i" role="dialog"><div class="css-e5tuit"><div class="css-1gykiw6">ストックするカテゴリー</div><button type="button" class="css-g11wic"><span class="material-symbols-outlined css-124mwq8" aria-hidden="true">close</span></button></div><div class="css-1g5b64m"><div class="css-1x1be31"><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">あとで読む</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">正規表現</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">image_tag</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">制限</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">知識を深める！</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">Rspec</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">時間の表示の方法</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">万葉課題実装用</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">scaffold</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">エンジニアとは？</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">Linux,AWS</label><label class="css-dnsxba"><input type="checkbox" class="css-15ro776">卒業制作</label></div><div class="css-1jh7527"><button type="button" class="css-1mteic8"><span class="material-symbols-outlined css-smnh30" aria-hidden="true">add</span><div class="css-6ozust">カテゴリーの新規作成</div></button></div></div><div class="css-1mkdie5"><button font-size="14" disabled="" class="css-1e09m4n e1rb7ucl0">保存する</button></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-2b32b114-73cb-4a85-9b2f-f0facad432c7">{}</script>
      
</div><script type="text/javascript" charset="UTF-8">!function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}},s=["blockEvents","unblockEvents","setSignedMode","setAnonymousMode","resetUUID","addRecord","fetchGlobalID","set","trackEvent","trackPageview","trackClicks","ready"],n=0;n<s.length;n++){var c=s[n];e[t].prototype[c]=r(c)}var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.treasuredata.com/sdk/2.1/td.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)}}("Treasure",this);</script><script type="text/javascript" charset="UTF-8" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/aid"></script><img width="0px" height="0px" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/tr" style="display: none;"><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;nQWIbqJ8pC9ty5XcTvodIWxhLwsA5l0ewVD75X+5zmNDR2yosX7QycL4U18IXXfkLSecxqcofQit7pppGk4oFA==&quot;,&quot;locale&quot;:&quot;ja&quot;,&quot;pushOne&quot;:{&quot;accessToken&quot;:&quot;4bc4bb057a0601d388a7b9e499ca2307e9eb4fc172804e310c59e511d7cac356&quot;,&quot;dialogImageUrl&quot;:&quot;//cdn.qiita.com/assets/public/push_notification/image-qiitan-572179a3bbde375850422ea48b2b6272.png&quot;}},&quot;currentUser&quot;:{&quot;encryptedId&quot;:&quot;ccoReTSiztyGUazNjRkjce53qp9XDZbd--yPkkoTSOjAUG8vbg--1rKRIaJfcPz0IvAbdXkaww==&quot;,&quot;isBetaReleaseEnabled&quot;:false,&quot;isEarlyAdapter&quot;:false,&quot;isEmailConfirmed&quot;:false,&quot;isJobseeker&quot;:false,&quot;isStaff&quot;:false,&quot;isTeamOnly&quot;:false,&quot;name&quot;:&quot;&quot;,&quot;newContribution&quot;:0,&quot;originalId&quot;:2882158,&quot;profileImageUrl&quot;:&quot;https://pbs.twimg.com/profile_images/1565297707148644352/1WQVUTyi_bigger.jpg&quot;,&quot;profileImageUrlW48&quot;:&quot;https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1565297707148644352%2F1WQVUTyi_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=80196121ecf776ff22e6ce415b228543&quot;,&quot;profileImageUrlW75&quot;:&quot;https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1565297707148644352%2F1WQVUTyi_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=592d78099e78f062efeb3a968549b778&quot;,&quot;unreadNotificationsCount&quot;:0,&quot;urlName&quot;:&quot;Kuma80822459&quot;,&quot;remainingPublicImageUploadableSizeInCurrentMonth&quot;:104857600,&quot;monthlyPublicImageUploadableSizeLimit&quot;:104857600,&quot;organizations&quot;:{&quot;edges&quot;:[{&quot;node&quot;:{&quot;encryptedId&quot;:&quot;p66cc8uvbALIZ3EOO+JlI5WU0LJVF8yGF3ph--llP/LNOLehADDH0s--bAQgRPc+sbud7ai43Ti44A==&quot;,&quot;name&quot;:&quot;DIVE INTO CODE（ダイブ イントゥ コード）&quot;,&quot;urlName&quot;:&quot;dive_into_code_organization&quot;}}],&quot;totalCount&quot;:1}}}"><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"adventCalendar":{"adventCalendar":{"currentDateTime":"Sat, 10 Dec 2022 23:04:01 +0900","isCalendarCreatable":true,"isLatestHeldYear":true,"isPreRegistering":false,"isRankingBeingHeld":true,"isSubscribable":true,"year":2022,"years":[2022,2021,2020,2019,2018,2017,2016,2015,2014,2013,2012,2011]}},"article":{"article":{"body":"\u003cp\u003eRuby on Railsで複数のモデル、複数のレコードを1つのフォームで一括登録/編集したい、Javascriptはあまり書かずに...という機会があったので、その実装について今回まとめてみました。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"完成イメージ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%8C%E6%88%90%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e完成イメージ\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eレシピのレコードと材料のレコードを同時に作成/編集できること\u003c/li\u003e\n\u003cli\u003e材料レコードは一括で複数作成/編集できること\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/532ed70af6abd433ed125e34c4deb83bca69f77a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f36303737303932352d393662662d613561362d366338362d3939663761393835366133632e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2F60770925-96bf-a5a6-6c86-99f7a9856a3c.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7abd40c970bc8ee020c457e04bb777ac\" alt=\"sample_complete_recipe.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/60770925-96bf-a5a6-6c86-99f7a9856a3c.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2F60770925-96bf-a5a6-6c86-99f7a9856a3c.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=85924b14fd7ecbfa0a06e8aaaac2e3aa 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこの記事を終えると、こんなアプリが出来るようになります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"前提\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E6%8F%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前提\u003c/h2\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"バージョン\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eバージョン\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003eruby 2.7.2\u003c/li\u003e\n\u003cli\u003erails 6.1\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"扱うモデル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%89%B1%E3%81%86%E3%83%A2%E3%83%87%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e扱うモデル\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003eRecipe(レシピ) Model\u003c/li\u003e\n\u003cli\u003eIngredient(材料) Model\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eレシピは複数の材料を持っている\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/87e9355181baf66e1f071a93f5765a2b06c34786/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f65653839366133302d623962352d363133312d663934382d6631336638646265626134622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Fee896a30-b9b5-6131-f948-f13f8dbeba4b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9682c2b9e5a438a19062e33e385aac17\" alt=\"スクリーンショット 2021-03-13 22.05.15.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/ee896a30-b9b5-6131-f948-f13f8dbeba4b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Fee896a30-b9b5-6131-f948-f13f8dbeba4b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=47b3bd20a73c62de216ed1f627e7f7ec 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこのような構成はすでに出来ている状態から始めます。具体的なmodelは以下を参考。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"appmodelsreciperb\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#appmodelsreciperb\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eapp/models/recipe.rb\u003c/h4\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e# == Schema Information\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# Table name: recipes\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  id         :integer          not null, primary key\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  name       :string           not null\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  created_at :datetime         not null\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  updated_at :datetime         not null\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRecipe\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationRecord\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ehas_many\u003c/span\u003e \u003cspan class=\"ss\"\u003e:ingredients\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003edependent: :destroy\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"appmodelsingredientrb\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#appmodelsingredientrb\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eapp/models/ingredient.rb\u003c/h4\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e# == Schema Information\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# Table name: ingredients\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  id         :integer          not null, primary key\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  recipe_id  :integer          not null\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  name       :string           not null\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  created_at :datetime         not null\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  updated_at :datetime         not null\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# Indexes\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  index_ingredients_on_recipe_id  (recipe_id)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# Foreign Keys\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#  recipe_id  (recipe_id =\u0026gt; recipes.id)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eIngredient\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationRecord\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ebelongs_to\u003c/span\u003e \u003cspan class=\"ss\"\u003e:recipe\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"手順\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%89%8B%E9%A0%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e手順\u003c/h2\u003e\n\n\u003cp\u003eさてここから、完成を目指して一つずつ手順を記していきます\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"1-accepts_nested_attributes_forを追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-accepts_nested_attributes_for%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. accepts_nested_attributes_forを追加\u003c/h3\u003e\n\n\u003cp\u003eapp/models/recipe.rbにaccepts_nested_attributes_forを追加します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRecipe\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationRecord\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ehas_many\u003c/span\u003e \u003cspan class=\"ss\"\u003e:ingredients\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003edependent: :destroy\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# ↓追加\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eaccepts_nested_attributes_for\u003c/span\u003e \u003cspan class=\"ss\"\u003e:ingredients\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003eallow_destroy: \u003c/span\u003e\u003cspan class=\"kp\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003ereject_if: :all_blank\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e参考：ActiveRecord::NestedAttributes::ClassMethods\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://api.rubyonrails.org/v6.1.0/classes/ActiveRecord/NestedAttributes/ClassMethods.html\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"2-cocoonを追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-cocoon%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. cocoonを追加\u003c/h3\u003e\n\n\u003cp\u003ecocoonとは、複数レコードをインタラクティブに追加、編集、削除を簡単に行うことが出来るようにするGem, Packageです\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eGemのcocoonをインストール\u003c/p\u003e\n\n\u003cp\u003e↓のようにGemfileに\u003ca href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noopener\" target=\"_blank\"\u003ecocoon\u003c/a\u003eを追加して \u003ccode\u003ebundle install\u003c/code\u003eします\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003egem\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"cocoon\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ecocoonのpackage追加\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"s\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eyarn\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e@\u003c/span\u003e\u003cspan class=\"n\"\u003enathanvda\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003ecocoon\u003c/span\u003e\u003cspan class=\"w\"\u003e \n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eapp/javascripts/packs/application.js の編集\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"js\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eRails\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e@rails/ujs\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eTurbolinks\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eturbolinks\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"nx\"\u003eActiveStorage\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e@rails/activestorage\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003echannels\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// これを追加\u003c/span\u003e\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e@nathanvda/cocoon\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eRails\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eTurbolinks\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eActiveStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"3-jqueryを使えるようにする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-jquery%E3%82%92%E4%BD%BF%E3%81%88%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. jqueryを使えるようにする\u003c/h3\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003econfig/webpack/plugins/jquery.jsを作成\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"sh\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003ebundle \u003cspan class=\"nb\"\u003eexec \u003c/span\u003erails webpack:install\n\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003emkdir \u003c/span\u003econfig/webpack/plugins/\n\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003etouch \u003c/span\u003econfig/webpack/plugins/jquery.js\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003econfig/webpack/plugins/jquery.jsに以下を記述\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"js\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eenvironment\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e@rails/webpacker\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ejquery\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e./plugins/jquery\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eplugins\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprepend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ejquery\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejquery\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nx\"\u003emodule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexports\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eenvironment\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003econfig/webpack/environment.js でjqueryを読み込む\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"js\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eenvironment\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e@rails/webpacker\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ejquery\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e./plugins/jquery\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eplugins\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprepend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ejquery\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejquery\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nx\"\u003emodule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexports\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eenvironment\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"4-recipecontroller作成とroutesを設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4-recipecontroller%E4%BD%9C%E6%88%90%E3%81%A8routes%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4. RecipeController作成とRoutesを設定\u003c/h3\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ebundle exec rails g controller recipes\u003c/code\u003eでController作成\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"s\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ebundle\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eexec\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003erails\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eg\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003econtroller\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003erecipes\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"n\"\u003eRunning\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003evia\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eSpring\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003epreloader\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003ein\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eprocess\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"m\"\u003e38240\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003ecreate\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"n\"\u003eapp\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003econtrollers\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003erecipes_controller.rb\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003einvoke\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"n\"\u003eerb\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003ecreate\u003c/span\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"n\"\u003eapp\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003eviews\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003erecipes\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003einvoke\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"n\"\u003etest_unit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003ecreate\u003c/span\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"n\"\u003etest\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003econtrollers\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003erecipes_controller_test.rb\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003einvoke\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"n\"\u003ehelper\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003ecreate\u003c/span\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"n\"\u003eapp\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003ehelpers\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003erecipes_helper.rb\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003einvoke\u003c/span\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"n\"\u003etest_unit\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003einvoke\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"n\"\u003eassets\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003einvoke\u003c/span\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"n\"\u003escss\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"n\"\u003ecreate\u003c/span\u003e\u003cspan class=\"w\"\u003e      \u003c/span\u003e\u003cspan class=\"n\"\u003eapp\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003eassets\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003estylesheets\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003erecipes.scss\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003econfig/routes.rbにrecipeのpathを追加\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"no\"\u003eRails\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eapplication\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eroutes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edraw\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eroot\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"recipes#index\"\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eresources\u003c/span\u003e \u003cspan class=\"ss\"\u003e:recipes\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003eonly: \u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"ss\"\u003e:index\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:new\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:create\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"5-recipeの一覧ページを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#5-recipe%E3%81%AE%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e5. Recipeの一覧ページを作成\u003c/h3\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eapp/controller/recipes_controller.rbにindexアクション追加\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRecipesController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eindex\u003c/span\u003e\n\u003cspan class=\"vi\"\u003e@recipes\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eRecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eall\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eRecipeの一覧ページを作成\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"shell\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003etouch \u003c/span\u003eapp/views/recipes/index.html.erb\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"erb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;h1\u0026gt;\u003c/span\u003eレシピ一覧\u003cspan class=\"nt\"\u003e\u0026lt;/h1\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;ul\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"cp\"\u003e\u0026lt;%\u003c/span\u003e \u003cspan class=\"vi\"\u003e@recipes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eeach\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003erecipe\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;li\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003elink_to\u003c/span\u003e \u003cspan class=\"n\"\u003erecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eedit_recipe_path\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026lt;/li\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;ul\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"cp\"\u003e\u0026lt;%\u003c/span\u003e \u003cspan class=\"n\"\u003erecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eingredients\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eeach\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003eingredient\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;li\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003eingredient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ename\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026lt;/li\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"cp\"\u003e\u0026lt;%\u003c/span\u003e \u003cspan class=\"k\"\u003eend\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/ul\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"cp\"\u003e\u0026lt;%\u003c/span\u003e \u003cspan class=\"k\"\u003eend\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/ul\u0026gt;\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003elink_to\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"レシピの新規作成\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enew_recipe_path\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eするとこんなページが出来上がります\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/1700ed5d2c1fca591240ecdebbc94784463d7cda/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f64303933373535382d336462392d303762392d373866372d6339626433306266366662332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Fd0937558-3db9-07b9-78f7-c9bd30bf6fb3.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=caf16e9976bb48f7484fb01c1ac88975\" alt=\"スクリーンショット 2021-03-14 2.19.11.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/d0937558-3db9-07b9-78f7-c9bd30bf6fb3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Fd0937558-3db9-07b9-78f7-c9bd30bf6fb3.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0729ed3d995a7ea1838701319fd99ea1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"6-recipeの新規作成ページを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#6-recipe%E3%81%AE%E6%96%B0%E8%A6%8F%E4%BD%9C%E6%88%90%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e6. Recipeの新規作成ページを作成\u003c/h3\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eapp/controller/recipes_controller.rbにnewアクション追加\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRecipesController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n\u003cspan class=\"o\"\u003e~~\u003c/span\u003e \u003cspan class=\"err\"\u003e省略\u003c/span\u003e \u003cspan class=\"o\"\u003e~~~\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n\u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eRecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eapp/views/recipes/new.html.erb を作成\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"shell\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003etouch \u003c/span\u003eapp/views/recipes/new.html.erb\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"erb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;h1\u0026gt;\u003c/span\u003eレシピの新規作成\u003cspan class=\"nt\"\u003e\u0026lt;/h1\u0026gt;\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"recipes/form\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003emodel: \u003c/span\u003e\u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eapp/views/recipes/_form.html.erbを作成\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"shell\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003etouch \u003c/span\u003eapp/views/recipes/_form.html.erb\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"erb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003eform_with\u003c/span\u003e \u003cspan class=\"ss\"\u003emodel: \u003c/span\u003e\u003cspan class=\"n\"\u003emodel\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;div\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elabel\u003c/span\u003e \u003cspan class=\"ss\"\u003e:name\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"レシピ名\"\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext_field\u003c/span\u003e \u003cspan class=\"ss\"\u003e:name\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ingredients\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003elink_to_add_association\u003c/span\u003e \u003cspan class=\"s1\"\u003e'材料の追加'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:ingredients\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n     \u003cspan class=\"ss\"\u003edata: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"ss\"\u003eassociation_insertion_method: \u003c/span\u003e\u003cspan class=\"s1\"\u003e'append'\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efields_for\u003c/span\u003e \u003cspan class=\"ss\"\u003e:ingredients\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003eingredient\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e]\n     \u003cspan class=\"c\"\u003e\u0026lt;%# ファイル名はingredient_fieldsにしてください %\u0026gt;\u003c/span\u003e\n     \u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"recipes/ingredient_fields\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003ef: \u003c/span\u003e\u003cspan class=\"n\"\u003eingredient\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"cp\"\u003e\u0026lt;%\u003c/span\u003e \u003cspan class=\"k\"\u003eend\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esubmit\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"作成する\"\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e\u0026lt;%\u003c/span\u003e \u003cspan class=\"k\"\u003eend\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eapp/views/recipes/_ingredient_fields.html.erbを作成\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"shell\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003etouch \u003c/span\u003eapp/views/recipes/_ingredient_fields.html.erb\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"nested-fields\"\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sx\"\u003e%= f.label :name, \"材料名\" %\u0026gt;\n  \u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext_field\u003c/span\u003e \u003cspan class=\"ss\"\u003e:name\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sx\"\u003e%= link_to_remove_association \"削除\", f %\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eここまで行うと、以下のような画面になります\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/def1284d00e76b57d56a17e34a1596ffecaa97ab/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f30663433613339392d346562662d626330662d336137322d6433336162613130316135632e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2F0f43a399-4ebf-bc0f-3a72-d33aba101a5c.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=591c381c6133c256c8950ff2f82b7425\" alt=\"sample_recipe.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/0f43a399-4ebf-bc0f-3a72-d33aba101a5c.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2F0f43a399-4ebf-bc0f-3a72-d33aba101a5c.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=de9b36781e771759d982acbfdd288ac1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"7-レシピ材料の作成createアクションを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#7-%E3%83%AC%E3%82%B7%E3%83%94%E6%9D%90%E6%96%99%E3%81%AE%E4%BD%9C%E6%88%90create%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e7. レシピ、材料の作成(Create)アクションを作成\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRecipesController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eRecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# ここから\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eRecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eupdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecipe_params\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eredirect_to\u003c/span\u003e \u003cspan class=\"n\"\u003eroot_path\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"ss\"\u003e:new\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"kp\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003erecipe_params\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# :idがないと毎回新しくレコードが作られてしまいます\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# :_destroyがないと削除ができないです\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:recipe\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003epermit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:name\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003eingredients_attributes: \u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"ss\"\u003e:id\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:name\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:_destroy\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# ここまで追加\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ecreateアクションの追加が完了すると、レシピと材料を一括で作成してDBに保存する処理まで出来るようになります！\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"8-レシピの編集ページを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#8-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AE%E7%B7%A8%E9%9B%86%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e8. レシピの編集ページを作成\u003c/h3\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eapp/views/recipes/edit.html.erbの作成\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"sh\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003etouch \u003c/span\u003eapp/views/recipes/edit.html.erb\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eapp/views/recipes/edit.html.erbの編集\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"erb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;h1\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ename\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003eの編集\u003cspan class=\"nt\"\u003e\u0026lt;/h1\u0026gt;\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"recipes/form\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003emodel: \u003c/span\u003e\u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e \u003cspan class=\"cp\"\u003e%\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eapp/controllers/recipes_controller.rbの編集\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRecipesController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n\u003cspan class=\"o\"\u003e~~\u003c/span\u003e \u003cspan class=\"err\"\u003e省略\u003c/span\u003e \u003cspan class=\"o\"\u003e~~\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eedit\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eRecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"ss\"\u003e:id\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"o\"\u003e~~\u003c/span\u003e \u003cspan class=\"err\"\u003e省略\u003c/span\u003e \u003cspan class=\"o\"\u003e~~\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこんなページが出来上がります\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b3fdd5be7f9aabd69833321bc4c4bd281d5e2a59/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130373334352f66343837363634312d336165312d386166652d353962352d6262323661313764633164612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Ff4876641-3ae1-8afe-59b5-bb26a17dc1da.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=fd4fbcbd0f12acc41c1cb0dd3b1b8491\" alt=\"スクリーンショット 2021-03-14 2.28.55.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/f4876641-3ae1-8afe-59b5-bb26a17dc1da.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F107345%2Ff4876641-3ae1-8afe-59b5-bb26a17dc1da.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=986d685e40e65cd132ffe7c7feb43ce6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"9-レシピのupdateアクションを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#9-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AEupdate%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e9. レシピのupdateアクションを作成\u003c/h3\u003e\n\n\u003cp\u003eapp/controllers/recipes_controller.rbにupdateアクションを追加\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRecipesController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n\u003cspan class=\"o\"\u003e~~\u003c/span\u003e \u003cspan class=\"err\"\u003e省略\u003c/span\u003e \u003cspan class=\"o\"\u003e~~\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eupdate\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eRecipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"ss\"\u003e:id\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"vi\"\u003e@recipe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eupdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecipe_params\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eredirect_to\u003c/span\u003e \u003cspan class=\"n\"\u003eroot_path\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"ss\"\u003e:edit\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"o\"\u003e~~\u003c/span\u003e \u003cspan class=\"err\"\u003e省略\u003c/span\u003e \u003cspan class=\"o\"\u003e~~\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれで一括の更新もできるようになりました！\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"終わりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e終わりに\u003c/h2\u003e\n\n\u003cp\u003e長かったですが、これで以上になります。\u003cbr\u003e\nあまりJavaScriptを書かずに動的にフォームの追加や削除をしたいということがあったので、今回のような実装について書きました。\u003c/p\u003e\n\n\u003cp\u003e同じようなことがあればぜひご参考ください！\u003c/p\u003e\n","createdAt":"2021-03-14T02:47:44Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"LnsT/9pP8hO/ry0OEzWGjd1tAvvseQ2JVg==--RcmMCBiecZw+Ydzz--GXASb/twCU8CFdTrGsbKbg==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":true,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":false,"lastModifiedAt":"2021-03-14T02:47:44Z","likesCount":7,"linkUrl":"https://qiita.com/hatsu/items/5465f29060945a615ecd","organization":null,"stockedCount":3,"title":"【Rails6】親モデルと一緒に複数の子レコードを一括で登録/編集するフォームの作り方","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%8C%E6%88%90%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e完成イメージ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%89%8D%E6%8F%90\"\u003e前提\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3\"\u003eバージョン\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%89%B1%E3%81%86%E3%83%A2%E3%83%87%E3%83%AB\"\u003e扱うモデル\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#appmodelsreciperb\"\u003eapp/models/recipe.rb\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#appmodelsingredientrb\"\u003eapp/models/ingredient.rb\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%89%8B%E9%A0%86\"\u003e手順\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1-accepts_nested_attributes_for%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003e1. accepts_nested_attributes_forを追加\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-cocoon%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003e2. cocoonを追加\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4-recipecontroller%E4%BD%9C%E6%88%90%E3%81%A8routes%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e4. RecipeController作成とRoutesを設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#5-recipe%E3%81%AE%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90\"\u003e5. Recipeの一覧ページを作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#6-recipe%E3%81%AE%E6%96%B0%E8%A6%8F%E4%BD%9C%E6%88%90%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90\"\u003e6. Recipeの新規作成ページを作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#7-%E3%83%AC%E3%82%B7%E3%83%94%E6%9D%90%E6%96%99%E3%81%AE%E4%BD%9C%E6%88%90create%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90\"\u003e7. レシピ、材料の作成(Create)アクションを作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#8-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AE%E7%B7%A8%E9%9B%86%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90\"\u003e8. レシピの編集ページを作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#9-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AEupdate%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90\"\u003e9. レシピのupdateアクションを作成\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e終わりに\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":3148,"uuid":"5465f29060945a615ecd","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"jVU80TNu+2taXEiRzuBfcKhSN72+--QvGxSbqu9/XxEnHO--+oU+Pq8ysuuUBOvlncCrNg==","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/107345/profile-images/1559656090","urlName":"hatsu","twitterUrlName":"hatsu_38","revealedOrganizations":{"edges":[]}},"tags":[{"name":"Rails","urlName":"rails"},{"name":"cocoon","urlName":"cocoon"}],"followingLikers":{"edges":[]}},"comments":[],"client":null,"adsEventEmitter":null}}</script><iframe src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/container.html" style="visibility: hidden; display: none;"></iframe></div><div id="itm_4330" style="visibility: hidden; display: none;"></div><ul class="dropdown-menu textcomplete-dropdown" style="display: none; position: absolute; z-index: 1000;"></ul><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/pixel" width="1" height="1" style="display: none;"><iframe name="google_ads_top_frame" id="google_ads_top_frame" style="display: none; position: fixed; left: -999px; top: -999px; width: 0px; height: 0px;" src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/saved_resource(1).html"></iframe><img src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/rep" style="display: none;"><iframe src="./【Rails6】親モデルと一緒に複数の子レコードを一括で登録_編集するフォームの作り方 - Qiita_files/aframe.html" width="0" height="0" style="display: none;"></iframe></body><deepl-inline-trigger style="z-index: 2147483647;"></deepl-inline-trigger></html>